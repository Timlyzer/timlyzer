# Timlyzer Post-MVP äº§å“éœ€æ±‚æ–‡æ¡£

> ğŸ“… åˆ›å»ºæ—¥æœŸ: 2026-02-28
> ğŸ“‹ ç‰ˆæœ¬: v1.0
> ğŸ“Œ åŸºçº¿: MVP ~97% å®Œæˆï¼ˆä»…å‰©å¼€æœºè‡ªå¯åŠ¨ + å¤šå¹³å°æµ‹è¯•ï¼‰

---

## 1. äº§å“æ¦‚è¿°

### 1.1 æ„¿æ™¯ä¸å®šä½

Timlyzer æ˜¯ä¸€æ¬¾**éšç§ä¼˜å…ˆã€è½»é‡é«˜æ€§èƒ½çš„è‡ªåŠ¨æ—¶é—´è¿½è¸ªæ¡Œé¢åº”ç”¨**ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ï¼š

> **ã€ŒRescueTime çš„æ´å¯ŸåŠ› + ActivityWatch çš„éšç§æ€§ã€**

åœ¨æ‰€æœ‰æ•°æ®é»˜è®¤ä¸ç¦»å¼€ç”¨æˆ·è®¾å¤‡çš„å‰æä¸‹ï¼Œé€šè¿‡æœ¬åœ°æ™ºèƒ½åˆ†ææä¾›æœ‰ä»·å€¼çš„ç”Ÿäº§åŠ›æ´å¯Ÿï¼Œå¸®åŠ©ç”¨æˆ·ç†è§£å¹¶ä¼˜åŒ–æ—¶é—´åˆ†é…ã€‚

### 1.2 ç›®æ ‡ç”¨æˆ·ç”»åƒ

| ç”¨æˆ·ç±»å‹ | æ ¸å¿ƒéœ€æ±‚ | å…³é”®ç—›ç‚¹ |
|----------|----------|----------|
| **ç‹¬ç«‹å¼€å‘è€…** | äº†è§£é¡¹ç›®æ—¶é—´æŠ•å…¥ | ä¸æƒ³æ‰‹åŠ¨è®°å½•ï¼Œæ‹…å¿ƒæ•°æ®éšç§ |
| **è‡ªç”±èŒä¸šè€…** | å‘å®¢æˆ·æ±‡æŠ¥å·¥æ—¶ | éœ€è¦æŒ‰é¡¹ç›®ç»´åº¦çš„æ—¶é—´æŠ¥è¡¨ |
| **çŸ¥è¯†å·¥ä½œè€…** | ä¼˜åŒ–æ—¶é—´åˆ†é… | ç¢ç‰‡åŒ–ä¸¥é‡ï¼Œç¼ºä¹é‡åŒ–æ´å¯Ÿ |
| **è¿œç¨‹å·¥ä½œè€…** | è‡ªæˆ‘ç®¡ç†ä¸æ•ˆç‡æå‡ | ç¼ºå°‘ç»“æ„åŒ–çš„å·¥ä½œæ—¶é—´åé¦ˆ |

### 1.3 æ ¸å¿ƒå·®å¼‚åŒ–

| å·®å¼‚ç‚¹ | Timlyzer | ç«å“ç°çŠ¶ |
|--------|----------|----------|
| **éšç§** | æ•°æ® 100% æœ¬åœ°å­˜å‚¨ï¼ŒAI æ¨ç†åœ¨è®¾å¤‡ç«¯ | RescueTime/Timely ç­‰ä¾èµ–äº‘ç«¯ |
| **è½»é‡** | Tauri æ‰“åŒ… < 30MBï¼Œè¿è¡Œå†…å­˜ < 100MB | Electron æ–¹æ¡ˆ 150MB+ æ‰“åŒ… |
| **æ™ºèƒ½** | æœ¬åœ° AI åˆ†ç±» + è§„åˆ™å¼•æ“ï¼ˆPhase 3ï¼‰ | ä»…äº‘ç«¯æ–¹æ¡ˆæä¾›æ™ºèƒ½åˆ†ç±» |
| **å¼€æº** | å®Œå…¨å¼€æºï¼Œç¤¾åŒºå¯å®¡è®¡ | å•†ä¸šäº§å“ä»£ç ä¸é€æ˜ |

---

## 2. Phase 1 â€” MVP æ”¶å°¾

> ç›®æ ‡ï¼šå®Œæˆæœ€åçš„ MVP å¾…åŠé¡¹ï¼Œå‘å¸ƒ v1.0

### F1.1 å¼€æœºè‡ªå¯åŠ¨

**ç”¨æˆ·æ•…äº‹**

> ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘å¸Œæœ›åº”ç”¨èƒ½åœ¨ç”µè„‘å¯åŠ¨æ—¶è‡ªåŠ¨è¿è¡Œï¼Œè¿™æ ·æˆ‘ä¸éœ€è¦æ¯å¤©æ‰‹åŠ¨æ‰“å¼€åº”ç”¨å°±èƒ½æŒç»­è¿½è¸ªæ—¶é—´ã€‚

**åŠŸèƒ½éœ€æ±‚**

| ID | éœ€æ±‚ | ä¼˜å…ˆçº§ |
|----|------|--------|
| AB-01 | æä¾›"å¼€æœºè‡ªå¯åŠ¨"è®¾ç½®å¼€å…³ | P1 |
| AB-02 | è‡ªå¯åŠ¨æ—¶é»˜è®¤æœ€å°åŒ–åˆ°ç³»ç»Ÿæ‰˜ç›˜ | P1 |
| AB-03 | è·¨å¹³å°æ”¯æŒï¼ˆmacOS Launch Agent / Windows Registry / Linux autostartï¼‰ | P1 |

**æŠ€æœ¯å®ç°è¦ç‚¹**

- ä½¿ç”¨ `tauri-plugin-autostart` æ’ä»¶
- è‡ªå¯åŠ¨æ—¶ä¼ å…¥ `--minimized` å‚æ•°ï¼Œé…åˆç°æœ‰ `startMinimized` è®¾ç½®
- å·²æœ‰ `Settings.startOnBoot` å­—æ®µï¼ˆ`src/types/index.ts:74`ï¼‰ï¼Œå‰ç«¯è®¾ç½®é¡µé¢å·²é¢„ç•™

**éªŒæ”¶æ ‡å‡†**

- [ ] å¼€å¯åé‡å¯ç³»ç»Ÿï¼Œåº”ç”¨è‡ªåŠ¨å¯åŠ¨å¹¶æœ€å°åŒ–åˆ°æ‰˜ç›˜
- [ ] å…³é—­åé‡å¯ç³»ç»Ÿï¼Œåº”ç”¨ä¸è‡ªåŠ¨å¯åŠ¨
- [ ] macOS / Windows / Linux ä¸‰å¹³å°å‡æ­£å¸¸å·¥ä½œ

### F1.2 å¤šå¹³å°æ„å»ºä¸æµ‹è¯•

**ç”¨æˆ·æ•…äº‹**

> ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘å¸Œæœ›åœ¨ macOSã€Windows å’Œ Linux ä¸Šéƒ½èƒ½æ­£å¸¸å®‰è£…å’Œä½¿ç”¨ Timlyzerã€‚

**åŠŸèƒ½éœ€æ±‚**

| ID | éœ€æ±‚ | ä¼˜å…ˆçº§ |
|----|------|--------|
| MP-01 | macOS æ„å»ºï¼ˆDMG / .appï¼‰ | P0 |
| MP-02 | Windows æ„å»ºï¼ˆNSIS / MSIï¼‰ | P0 |
| MP-03 | Linux æ„å»ºï¼ˆAppImage / .debï¼‰ | P0 |
| MP-04 | CI/CD è‡ªåŠ¨æ„å»ºæµæ°´çº¿ | P1 |

**æŠ€æœ¯å®ç°è¦ç‚¹**

- ä½¿ç”¨ GitHub Actions é…ç½®å¤šå¹³å°æ„å»ºçŸ©é˜µ
- macOS éœ€å¤„ç†ä»£ç ç­¾åå’Œå…¬è¯ï¼ˆnotarizationï¼‰
- Windows éœ€å¤„ç† WebView2 è¿è¡Œæ—¶ä¾èµ–
- Linux éœ€å¤„ç† `libwebkit2gtk-4.1` ä¾èµ–

**éªŒæ”¶æ ‡å‡†**

- [ ] ä¸‰å¹³å°å‡èƒ½æ­£å¸¸å®‰è£…ã€å¯åŠ¨ã€è¿½è¸ªã€é€€å‡º
- [ ] æ´»åŠ¨çª—å£æ£€æµ‹åœ¨ä¸‰å¹³å°ä¸Šå‡†ç¡®
- [ ] ç³»ç»Ÿç©ºé—²/ä¼‘çœ æ£€æµ‹åœ¨ä¸‰å¹³å°ä¸Šæ­£å¸¸å·¥ä½œ

### F1.3 v1.0 æ­£å¼å‘å¸ƒ

**åŠŸèƒ½éœ€æ±‚**

| ID | éœ€æ±‚ | ä¼˜å…ˆçº§ |
|----|------|--------|
| RL-01 | GitHub Release åŒ…å«ä¸‰å¹³å°å®‰è£…åŒ… | P0 |
| RL-02 | é…ç½®è‡ªåŠ¨æ›´æ–°ç«¯ç‚¹ï¼ˆtauri-plugin-updaterï¼‰ | P1 |
| RL-03 | ç¼–å†™ç”¨æˆ·å®‰è£…æŒ‡å— | P1 |

---

## 3. Phase 2 â€” å·®å¼‚åŒ–åŠŸèƒ½ï¼ˆçŸ­æœŸ 1-2 ä¸ªæœˆï¼‰

> ç›®æ ‡ï¼šå½¢æˆè¿½è¸ª + ä¸»åŠ¨ç®¡ç†çš„äº§å“é—­ç¯ï¼Œå»ºç«‹å·®å¼‚åŒ–ç«äº‰åŠ›

### F2.1 ä¸“æ³¨æ¨¡å¼ / ç•ªèŒ„é’Ÿ

**ç”¨æˆ·æ•…äº‹**

> ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘å¸Œæœ›èƒ½ä½¿ç”¨å†…ç½®çš„ç•ªèŒ„é’Ÿè¿›å…¥ä¸“æ³¨æ¨¡å¼ï¼Œå¹¶åœ¨æ—¶é—´çº¿ä¸Šçœ‹åˆ°æˆ‘çš„ä¸“æ³¨æ—¶æ®µï¼Œè¿™æ ·æˆ‘èƒ½é‡åŒ–è‡ªå·±çš„æ·±åº¦å·¥ä½œæ—¶é—´å¹¶æŒç»­æ”¹å–„ã€‚

**åŠŸèƒ½éœ€æ±‚**

| ID | éœ€æ±‚ | ä¼˜å…ˆçº§ |
|----|------|--------|
| FM-01 | å¯åŠ¨/æš‚åœ/åœæ­¢ç•ªèŒ„é’Ÿè®¡æ—¶å™¨ | P0 |
| FM-02 | é»˜è®¤ 25 åˆ†é’Ÿä¸“æ³¨ + 5 åˆ†é’Ÿä¼‘æ¯å‘¨æœŸ | P0 |
| FM-03 | è‡ªå®šä¹‰ä¸“æ³¨/ä¼‘æ¯æ—¶é•¿ | P1 |
| FM-04 | ä¸“æ³¨æ—¶æ®µè‡ªåŠ¨è®°å½•åˆ°æ—¶é—´çº¿ Task è½¨é“ | P0 |
| FM-05 | ä¸“æ³¨å®Œæˆæ—¶å‘é€ç³»ç»Ÿé€šçŸ¥ | P1 |
| FM-06 | ä¸“æ³¨æœŸé—´å¯é€‰å±è”½é€šçŸ¥ | P2 |
| FM-07 | æ¯æ—¥/å‘¨ä¸“æ³¨æ—¶é•¿ç»Ÿè®¡ | P1 |
| FM-08 | ä¸“æ³¨ç›®æ ‡è®¾å®šä¸è¾¾æˆç‡æ˜¾ç¤º | P2 |
| FM-09 | æ‰˜ç›˜çª—å£æ˜¾ç¤ºå½“å‰ä¸“æ³¨å€’è®¡æ—¶ | P1 |

**æ•°æ®æ¨¡å‹**

æ–°å¢ `focus_sessions` è¡¨ï¼š

```sql
CREATE TABLE focus_sessions (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    focus_duration INTEGER NOT NULL,    -- ä¸“æ³¨æ—¶é•¿ï¼ˆç§’ï¼‰
    break_duration INTEGER NOT NULL,    -- ä¼‘æ¯æ—¶é•¿ï¼ˆç§’ï¼‰
    status TEXT NOT NULL,               -- 'focusing' | 'break' | 'completed' | 'cancelled'
    begin_date INTEGER NOT NULL,        -- å¼€å§‹æ—¶é—´æˆ³ (ms)
    end_date INTEGER,                   -- ç»“æŸæ—¶é—´æˆ³ (ms)
    track_item_id INTEGER,              -- å…³è”çš„ LogTrackItem ID
    FOREIGN KEY (track_item_id) REFERENCES track_items(id)
);
```

TypeScript æ¥å£ï¼š

```typescript
interface FocusSession {
  id?: number;
  focusDuration: number;    // seconds
  breakDuration: number;    // seconds
  status: 'focusing' | 'break' | 'completed' | 'cancelled';
  beginDate: number;
  endDate?: number;
  trackItemId?: number;
}

interface FocusSettings {
  defaultFocusDuration: number;   // default 1500 (25min)
  defaultBreakDuration: number;   // default 300 (5min)
  longBreakDuration: number;      // default 900 (15min)
  longBreakInterval: number;      // default 4 (every 4 pomodoros)
  dailyGoal: number;              // default 8 (pomodoros)
  autoStartBreak: boolean;
  autoStartFocus: boolean;
  muteNotifications: boolean;
}
```

**UI äº¤äº’è¯´æ˜**

- å…¥å£ï¼šä¾§è¾¹æ æ–°å¢ "Focus" å¯¼èˆªé¡¹ + æ‰˜ç›˜çª—å£å¿«æ·å…¥å£
- é¡µé¢ä½ç½®ï¼šç‹¬ç«‹çš„ FocusPage æˆ– Timeline é¡µé¢å†…åµŒé¢æ¿

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Focus Mode                   [Settings] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚              â”‚  24:35   â”‚                â”‚
â”‚              â”‚ FOCUSING â”‚                â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                          â”‚
â”‚         [Pause]  [Stop]  [Skip]          â”‚
â”‚                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Today: ğŸ… 6/8 completed                 â”‚
â”‚  Total focus: 2h 30m                     â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘ 75%          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Recent Sessions                         â”‚
â”‚  09:00 - 09:25  ğŸ… Completed             â”‚
â”‚  09:30 - 09:55  ğŸ… Completed             â”‚
â”‚  10:00 - 10:18  âœ• Cancelled              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**éªŒæ”¶æ ‡å‡†**

- [ ] èƒ½å¯åŠ¨ 25 åˆ†é’Ÿä¸“æ³¨å€’è®¡æ—¶ï¼Œåˆ°æ—¶å‘é€ç³»ç»Ÿé€šçŸ¥
- [ ] ä¸“æ³¨æ—¶æ®µè‡ªåŠ¨ç”Ÿæˆ `LogTrackItem` æ˜¾ç¤ºåœ¨æ—¶é—´çº¿ Task è½¨é“
- [ ] ç»Ÿè®¡é¡µé¢æ˜¾ç¤ºæ¯æ—¥/å‘¨ä¸“æ³¨æ—¶é•¿å’Œå®Œæˆæ¬¡æ•°
- [ ] æ‰˜ç›˜çª—å£å®æ—¶æ˜¾ç¤ºå‰©ä½™æ—¶é—´

**æŠ€æœ¯å®ç°è¦ç‚¹**

- Rust ç«¯æ–°å¢ `FocusService`ï¼Œå¤ç”¨ `services/tracker.rs` çš„ tokio å®šæ—¶å™¨æ¨¡å¼
- ä¸“æ³¨æ—¶æ®µé€šè¿‡åˆ›å»º `LogTrackItem`ï¼ˆ`task_name = "LogTrackItem"`ï¼‰èå…¥ç°æœ‰æ—¶é—´çº¿
- å‰ç«¯æ–°å¢ `focus-store.ts`ï¼ˆZustandï¼‰ï¼Œéµå¾ªç°æœ‰ store æ¨¡å¼
- é€šçŸ¥ä½¿ç”¨ `tauri-plugin-notification`
- i18n æ–°å¢ `focus` namespace

---

### F2.2 é¡¹ç›®/æ ‡ç­¾ç³»ç»Ÿ + è‡ªåŠ¨åˆ†ç±»è§„åˆ™

**ç”¨æˆ·æ•…äº‹**

> ä½œä¸ºè‡ªç”±èŒä¸šè€…ï¼Œæˆ‘å¸Œæœ›èƒ½å°†è‡ªåŠ¨è¿½è¸ªçš„åº”ç”¨æ´»åŠ¨å…³è”åˆ°ä¸åŒçš„é¡¹ç›®ï¼Œå¹¶è®¾å®šè§„åˆ™è®©åº”ç”¨è‡ªåŠ¨åˆ†ç±»ï¼Œè¿™æ ·æˆ‘èƒ½æŒ‰é¡¹ç›®ç»´åº¦æŸ¥çœ‹æ—¶é—´æŠ•å…¥ã€‚

**åŠŸèƒ½éœ€æ±‚**

| ID | éœ€æ±‚ | ä¼˜å…ˆçº§ |
|----|------|--------|
| PT-01 | åˆ›å»º/ç¼–è¾‘/åˆ é™¤é¡¹ç›® | P0 |
| PT-02 | ä¸ºé¡¹ç›®è®¾ç½®é¢œè‰²å’Œå›¾æ ‡ | P1 |
| PT-03 | æ‰‹åŠ¨å°†è¿½è¸ªé¡¹å…³è”åˆ°é¡¹ç›® | P0 |
| PT-04 | åˆ›å»ºè‡ªåŠ¨åˆ†ç±»è§„åˆ™ï¼ˆåŸºäºåº”ç”¨å + æ ‡é¢˜å…³é”®è¯åŒ¹é…ï¼‰ | P0 |
| PT-05 | è§„åˆ™ä¼˜å…ˆçº§æ’åº | P1 |
| PT-06 | åˆ›å»º/ç®¡ç†æ ‡ç­¾ï¼ˆä¸€ä¸ªè¿½è¸ªé¡¹å¯å…³è”å¤šä¸ªæ ‡ç­¾ï¼‰ | P1 |
| PT-07 | æŒ‰é¡¹ç›®ç»´åº¦çš„æ—¶é—´ç»Ÿè®¡æŠ¥è¡¨ | P0 |
| PT-08 | æŒ‰æ ‡ç­¾ç»´åº¦çš„æ—¶é—´ç­›é€‰ | P1 |
| PT-09 | è§„åˆ™æµ‹è¯•/é¢„è§ˆåŠŸèƒ½ | P2 |

**æ•°æ®æ¨¡å‹**

æ–°å¢è¡¨ï¼š

```sql
-- é¡¹ç›®è¡¨
CREATE TABLE projects (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL UNIQUE,
    color TEXT,
    icon TEXT,
    description TEXT,
    archived INTEGER NOT NULL DEFAULT 0,
    created_at INTEGER NOT NULL,
    updated_at INTEGER NOT NULL
);

-- æ ‡ç­¾è¡¨
CREATE TABLE tags (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL UNIQUE,
    color TEXT
);

-- è¿½è¸ªé¡¹-é¡¹ç›®å…³è”è¡¨
CREATE TABLE track_item_projects (
    track_item_id INTEGER NOT NULL,
    project_id INTEGER NOT NULL,
    PRIMARY KEY (track_item_id, project_id),
    FOREIGN KEY (track_item_id) REFERENCES track_items(id) ON DELETE CASCADE,
    FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE
);

-- è¿½è¸ªé¡¹-æ ‡ç­¾å…³è”è¡¨
CREATE TABLE track_item_tags (
    track_item_id INTEGER NOT NULL,
    tag_id INTEGER NOT NULL,
    PRIMARY KEY (track_item_id, tag_id),
    FOREIGN KEY (track_item_id) REFERENCES track_items(id) ON DELETE CASCADE,
    FOREIGN KEY (tag_id) REFERENCES tags(id) ON DELETE CASCADE
);

-- è‡ªåŠ¨åˆ†ç±»è§„åˆ™è¡¨
CREATE TABLE classification_rules (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    priority INTEGER NOT NULL DEFAULT 0,
    app_pattern TEXT,           -- åº”ç”¨ååŒ¹é…æ¨¡å¼ï¼ˆæ”¯æŒé€šé…ç¬¦ï¼‰
    title_pattern TEXT,         -- æ ‡é¢˜åŒ¹é…æ¨¡å¼ï¼ˆæ”¯æŒæ­£åˆ™ï¼‰
    url_pattern TEXT,           -- URL åŒ¹é…æ¨¡å¼
    project_id INTEGER,
    enabled INTEGER NOT NULL DEFAULT 1,
    FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE SET NULL
);

CREATE INDEX idx_classification_rules_priority ON classification_rules(priority DESC);
```

TypeScript æ¥å£ï¼š

```typescript
interface Project {
  id?: number;
  name: string;
  color?: string;
  icon?: string;
  description?: string;
  archived: boolean;
  createdAt: number;
  updatedAt: number;
}

interface Tag {
  id?: number;
  name: string;
  color?: string;
}

interface ClassificationRule {
  id?: number;
  name: string;
  priority: number;
  appPattern?: string;
  titlePattern?: string;
  urlPattern?: string;
  projectId?: number;
  enabled: boolean;
}
```

**UI äº¤äº’è¯´æ˜**

- å…¥å£ï¼šè®¾ç½®é¡µé¢ â†’ é¡¹ç›®ç®¡ç† / åˆ†ç±»è§„åˆ™ï¼›ä¾§è¾¹æ  â†’ é¡¹ç›®è§†å›¾
- æ—¶é—´çº¿è¿½è¸ªé¡¹ hover æ—¶å¯å¿«é€Ÿå…³è”é¡¹ç›®

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Projects                     [+ New]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ”µ Timlyzer          This week: 12h 30m â”‚
â”‚  ğŸŸ¢ Client A          This week:  8h 15m â”‚
â”‚  ğŸŸ¡ Learning          This week:  3h 45m â”‚
â”‚  âš« Unclassified       This week:  5h 20m â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Classification Rules          [+ New]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ“ VSCode + "timlyzer" â†’ Timlyzer   [â–²â–¼] â”‚
â”‚  âœ“ Slack + "client-a"  â†’ Client A   [â–²â–¼] â”‚
â”‚  âœ“ Chrome + "coursera" â†’ Learning   [â–²â–¼] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**éªŒæ”¶æ ‡å‡†**

- [ ] åˆ›å»ºé¡¹ç›®åï¼Œæ‰‹åŠ¨å…³è”è¿½è¸ªé¡¹åˆ°é¡¹ç›®
- [ ] åˆ›å»ºè§„åˆ™åï¼Œæ–°äº§ç”Ÿçš„è¿½è¸ªé¡¹è‡ªåŠ¨åŒ¹é…åˆ°å¯¹åº”é¡¹ç›®
- [ ] ç»Ÿè®¡é¡µé¢å¯æŒ‰é¡¹ç›®ç­›é€‰æŸ¥çœ‹æ—¶é—´åˆ†å¸ƒ
- [ ] è§„åˆ™æ”¯æŒåº”ç”¨åé€šé…ç¬¦ + æ ‡é¢˜æ­£åˆ™åŒ¹é…

**æŠ€æœ¯å®ç°è¦ç‚¹**

- Rust ç«¯æ‰©å±• `database.rs`ï¼Œæ–°å¢è¡¨å’Œä»“åº“æ–¹æ³•
- åˆ†ç±»å¼•æ“åœ¨ `services/tracker.rs` ä¸­ï¼Œæ¯æ¬¡ä¿å­˜è¿½è¸ªé¡¹æ—¶æ‰§è¡Œè§„åˆ™åŒ¹é…
- è§„åˆ™åŒ¹é…ä½¿ç”¨ `regex` crateï¼ŒæŒ‰ priority é™åºæ‰§è¡Œï¼Œé¦–æ¬¡åŒ¹é…ç”Ÿæ•ˆ
- å‰ç«¯æ–°å¢ `project-store.ts`
- æ‰©å±•ç°æœ‰ `SummaryPage.tsx` æ·»åŠ é¡¹ç›®ç»´åº¦è§†å›¾
- i18n æ–°å¢ `projects` namespace

---

### F2.3 æ—¥å†çƒ­åŠ›å›¾ + è¶‹åŠ¿åˆ†æ

**ç”¨æˆ·æ•…äº‹**

> ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘å¸Œæœ›èƒ½é€šè¿‡æ—¥å†çƒ­åŠ›å›¾ä¸€è§ˆå…¨å¹´çš„å·¥ä½œå¼ºåº¦ï¼Œå¹¶çœ‹åˆ°å‘¨å¯¹æ¯”å’Œæœˆåº¦è¶‹åŠ¿ï¼Œè¿™æ ·æˆ‘èƒ½å‘ç°è‡ªå·±çš„æ—¶é—´ä½¿ç”¨è§„å¾‹ã€‚

**åŠŸèƒ½éœ€æ±‚**

| ID | éœ€æ±‚ | ä¼˜å…ˆçº§ |
|----|------|--------|
| HM-01 | GitHub é£æ ¼å¹´åº¦æ´»è·ƒçƒ­åŠ›å›¾ | P0 |
| HM-02 | çƒ­åŠ›å›¾é¢œè‰²æ·±æµ…åæ˜ å½“æ—¥æ´»è·ƒæ—¶é•¿ | P0 |
| HM-03 | ç‚¹å‡»æ—¥æœŸè·³è½¬åˆ°å½“æ—¥æ—¶é—´çº¿ | P1 |
| HM-04 | æœ¬å‘¨ vs ä¸Šå‘¨å¯¹æ¯”å›¾è¡¨ | P1 |
| HM-05 | æœˆåº¦è¶‹åŠ¿æŠ˜çº¿å›¾ï¼ˆæ¯æ—¥æ´»è·ƒæ—¶é•¿ï¼‰ | P1 |
| HM-06 | æ—¥å‡åœ¨çº¿æ—¶é•¿å’Œè¶‹åŠ¿æ–¹å‘æŒ‡ç¤º | P1 |
| HM-07 | æœ€æ´»è·ƒæ—¶æ®µæ£€æµ‹ï¼ˆ"ä½ é€šå¸¸åœ¨ X æ—¶æ•ˆç‡æœ€é«˜"ï¼‰ | P2 |

**æ•°æ®æ¨¡å‹**

æ— éœ€æ–°å¢è¡¨ã€‚é€šè¿‡èšåˆæŸ¥è¯¢ç°æœ‰ `track_items` å’Œ `focus_sessions` æ•°æ®ï¼š

```typescript
interface DailyActivitySummary {
  date: string;          // "2026-02-28"
  totalOnlineMs: number;
  totalFocusMs: number;
  appCount: number;
  topApp: string;
}

interface WeekComparison {
  thisWeek: DailyActivitySummary[];
  lastWeek: DailyActivitySummary[];
  changePercent: number; // positive = more active
}

interface HourlyPattern {
  hour: number;       // 0-23
  avgDurationMs: number;
  peakDay: string;     // "Monday"
}
```

**UI äº¤äº’è¯´æ˜**

- å…¥å£ï¼šä¾§è¾¹æ æ–°å¢ "Calendar" å¯¼èˆªé¡¹ï¼Œæˆ–ä½œä¸º Summary é¡µé¢å†… Tab

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Activity Heatmap                    2026         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Jan  Feb  Mar  Apr  May  Jun  Jul  Aug  Sep ... â”‚
â”‚  Mon  â–‘â–‘â–’â–’â–“â–“â–’â–’â–‘â–‘â–’â–’â–“â–“â–’â–’â–‘â–‘â–’â–’â–“â–“â–’â–’â–‘â–‘â–’â–’â–“â–“â–’â–’â–‘â–‘â–‘â–‘â–‘â–‘ â”‚
â”‚  Tue  â–‘â–‘â–“â–“â–“â–“â–’â–’â–‘â–‘â–“â–“â–“â–“â–’â–’â–‘â–‘â–“â–“â–“â–“â–’â–’â–‘â–‘â–“â–“â–“â–“â–’â–’â–‘â–‘â–‘â–‘â–‘â–‘ â”‚
â”‚  Wed  â–’â–’â–“â–“â–ˆâ–ˆâ–’â–’â–’â–’â–“â–“â–ˆâ–ˆâ–’â–’â–’â–’â–“â–“â–ˆâ–ˆâ–’â–’â–’â–’â–“â–“â–ˆâ–ˆâ–’â–’â–‘â–‘â–‘â–‘â–‘â–‘ â”‚
â”‚  Thu  â–‘â–‘â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚
â”‚  Fri  â–’â–’â–’â–’â–’â–’â–‘â–‘â–’â–’â–’â–’â–’â–’â–‘â–‘â–’â–’â–’â–’â–’â–’â–‘â–‘â–’â–’â–’â–’â–’â–’â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚
â”‚  Sat  â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚
â”‚  Sun  â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚
â”‚                                                    â”‚
â”‚  Less â–‘â–‘â–’â–’â–“â–“â–ˆâ–ˆ More                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Weekly Comparison                               â”‚
â”‚  This week: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  32h (+12% vs last week) â”‚
â”‚  Last week: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    28h                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Monthly Trend (Feb 2026)                        â”‚
â”‚  8hâ”‚        â•±â•²                                    â”‚
â”‚  6hâ”‚   â•±â•²  â•±  â•²   â•±â•²                             â”‚
â”‚  4hâ”‚â”€â”€â•±â”€â”€â•²â•±â”€â”€â”€â”€â•²â”€â•±â”€â”€â•²â”€â”€                          â”‚
â”‚  2hâ”‚                                              â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                        â”‚
â”‚     1   5   10  15  20  25  28                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**éªŒæ”¶æ ‡å‡†**

- [ ] çƒ­åŠ›å›¾æ­£ç¡®æ˜¾ç¤ºè¿‡å» 365 å¤©çš„æ´»è·ƒå¼ºåº¦
- [ ] ç‚¹å‡»æ—¥æœŸè·³è½¬åˆ°å¯¹åº”æ—¥æœŸçš„æ—¶é—´çº¿é¡µé¢
- [ ] å‘¨å¯¹æ¯”æ­£ç¡®è®¡ç®—ç™¾åˆ†æ¯”å˜åŒ–
- [ ] æœˆåº¦è¶‹åŠ¿æŠ˜çº¿å›¾æ•°æ®å‡†ç¡®

**æŠ€æœ¯å®ç°è¦ç‚¹**

- Rust ç«¯æ–°å¢èšåˆæŸ¥è¯¢å‘½ä»¤ï¼š`get_daily_summaries(from, to)` å’Œ `get_hourly_pattern(from, to)`
- çƒ­åŠ›å›¾å‰ç«¯ä½¿ç”¨ Recharts æˆ–è½»é‡ SVG è‡ªç»˜ï¼ˆå‚è€ƒ `react-calendar-heatmap`ï¼‰
- å¤ç”¨ç°æœ‰ `SummaryPage.tsx` çš„å›¾è¡¨ç»„ä»¶å’Œæ•°æ®è·å–æ¨¡å¼
- å‰ç«¯æ–°å¢ `calendar-store.ts` æˆ–æ‰©å±• `timeline-store.ts`
- i18n æ‰©å±• `summary` namespace

---

### F2.4 æ‰‹åŠ¨ä»»åŠ¡è¿½è¸ªå¢å¼º

**ç”¨æˆ·æ•…äº‹**

> ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘å¸Œæœ›èƒ½æ‰‹åŠ¨åˆ›å»ºå’Œç®¡ç†ä»»åŠ¡ï¼ˆå¦‚"ä¼šè®®"ã€"åˆé¤"ï¼‰ï¼Œè¿™æ ·æˆ‘å¯ä»¥è¿½è¸ªä¸åœ¨ç”µè„‘å‰æˆ–ä¸äº§ç”Ÿçª—å£åˆ‡æ¢çš„æ´»åŠ¨ã€‚

**åŠŸèƒ½éœ€æ±‚**

| ID | éœ€æ±‚ | ä¼˜å…ˆçº§ |
|----|------|--------|
| LT-01 | åˆ›å»ºæ–°ä»»åŠ¡å¹¶å¼€å§‹è®¡æ—¶ | P1 |
| LT-02 | åœæ­¢å½“å‰è¿è¡Œçš„ä»»åŠ¡ | P1 |
| LT-03 | åˆ‡æ¢ä»»åŠ¡ï¼ˆåœæ­¢æ—§ä»»åŠ¡ï¼Œå¼€å§‹æ–°ä»»åŠ¡ï¼‰ | P1 |
| LT-04 | ç¼–è¾‘ä»»åŠ¡ä¿¡æ¯ï¼ˆåç§°ã€é¢œè‰²ï¼‰ | P1 |
| LT-05 | åˆ é™¤ä»»åŠ¡è®°å½• | P1 |
| LT-06 | ä»»åŠ¡å¿«é€Ÿé€‰æ‹©ï¼ˆä»å†å²ä»»åŠ¡åˆ—è¡¨ï¼‰ | P2 |

> æ³¨ï¼šæ¥æºäº doc-04 ä¸­ P1/P2 å»¶ååŠŸèƒ½å›æ”¶

**æ•°æ®æ¨¡å‹**

å¤ç”¨ç°æœ‰ `track_items` è¡¨ï¼ˆ`task_name = "LogTrackItem"`ï¼‰ã€‚æ–°å¢å¿«é€Ÿé€‰æ‹©æ‰€éœ€çš„ä»»åŠ¡æ¨¡æ¿ï¼š

```sql
CREATE TABLE task_templates (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    color TEXT,
    usage_count INTEGER NOT NULL DEFAULT 0,
    last_used_at INTEGER
);
```

TypeScript æ¥å£ï¼š

```typescript
interface TaskTemplate {
  id?: number;
  name: string;
  color?: string;
  usageCount: number;
  lastUsedAt?: number;
}
```

**UI äº¤äº’è¯´æ˜**

- å…¥å£ï¼šæ‰˜ç›˜çª—å£ "Start Task" æŒ‰é’® + æ—¶é—´çº¿é¡µé¢ Task è½¨é“ä¸Šçš„ "+" æŒ‰é’®
- è¿è¡Œä¸­ä»»åŠ¡åœ¨æ‰˜ç›˜çª—å£å’ŒçŠ¶æ€æ æŒç»­æ˜¾ç¤º

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Start Task           [Recent] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Task name: [Meeting______]    â”‚
â”‚  Color:     [ğŸ”µ â–¼]            â”‚
â”‚                                â”‚
â”‚  Recent Tasks:                 â”‚
â”‚  â— Meeting          (5 times)  â”‚
â”‚  â— Code Review      (3 times)  â”‚
â”‚  â— Lunch Break      (12 times) â”‚
â”‚                                â”‚
â”‚  [Cancel]        [Start â–¶]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**éªŒæ”¶æ ‡å‡†**

- [ ] åˆ›å»ºä»»åŠ¡åï¼Œæ—¶é—´çº¿ Task è½¨é“å®æ—¶æ˜¾ç¤ºè¿è¡Œä¸­çš„ä»»åŠ¡æ¡
- [ ] åœæ­¢ä»»åŠ¡åï¼Œä»»åŠ¡æ¡æ­£ç¡®ç»“æŸå¹¶æŒä¹…åŒ–
- [ ] å¿«é€Ÿé€‰æ‹©åˆ—è¡¨æŒ‰ä½¿ç”¨é¢‘æ¬¡æ’åº
- [ ] å¯ç¼–è¾‘/åˆ é™¤å·²æœ‰çš„ä»»åŠ¡è®°å½•

**æŠ€æœ¯å®ç°è¦ç‚¹**

- å¤ç”¨ç°æœ‰ `LogTrackItem` ç±»å‹å’Œ `track_items` è¡¨ï¼Œæ— éœ€ä¿®æ”¹æ ¸å¿ƒ schema
- Rust ç«¯ `commands.rs` æ–°å¢ `start_log_task` / `stop_log_task` / `switch_log_task` å‘½ä»¤
- å‰ç«¯å¤ç”¨ `TimelineTrack.tsx` æ¸²æŸ“ Task è½¨é“
- æ‰˜ç›˜çª—å£æ‰©å±•å¿«é€Ÿå¯åœåŠŸèƒ½

---

### F2.5 ä¼‘æ¯æé†’é€šçŸ¥

**ç”¨æˆ·æ•…äº‹**

> ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘å¸Œæœ›åœ¨è¿ç»­å·¥ä½œä¸€æ®µæ—¶é—´åæ”¶åˆ°ä¼‘æ¯æé†’ï¼Œè¿™æ ·æˆ‘èƒ½ä¿æŒå¥åº·çš„å·¥ä½œèŠ‚å¥ã€‚

**åŠŸèƒ½éœ€æ±‚**

| ID | éœ€æ±‚ | ä¼˜å…ˆçº§ |
|----|------|--------|
| NO-01 | è¿ç»­åœ¨çº¿ X åˆ†é’Ÿåå‘é€ä¼‘æ¯æé†’ | P1 |
| NO-02 | è‡ªå®šä¹‰æé†’é—´éš”ï¼ˆé»˜è®¤ 60 åˆ†é’Ÿï¼‰ | P1 |
| NO-03 | é•¿æ—¶é—´ä½¿ç”¨æé†’ï¼ˆè¿ç»­ X å°æ—¶åå¼ºæé†’ï¼‰ | P2 |
| NO-04 | æé†’å¯ä¸´æ—¶ç¦ç”¨ï¼ˆå¦‚ä¸“æ³¨æ¨¡å¼æœŸé—´ï¼‰ | P1 |
| NO-05 | æé†’åŒ…å«å½“å‰è¿ç»­å·¥ä½œæ—¶é•¿ç»Ÿè®¡ | P2 |

> æ³¨ï¼šæ¥æºäº doc-04 ä¸­ NO-01~NO-03 å»¶ååŠŸèƒ½å›æ”¶

**æ•°æ®æ¨¡å‹**

æ‰©å±•ç°æœ‰ `settings` è¡¨ï¼ˆæˆ– `app_settings`ï¼‰ï¼š

```typescript
interface BreakReminderSettings {
  enabled: boolean;
  intervalMinutes: number;       // default 60
  longSessionHours: number;      // default 3
  longSessionEnabled: boolean;
  pauseDuringFocus: boolean;     // default true
  notificationTitle: string;
  notificationBody: string;
}
```

**UI äº¤äº’è¯´æ˜**

- è®¾ç½®å…¥å£ï¼šSettings â†’ Notifications
- é€šçŸ¥ä¸ºç³»ç»ŸåŸç”Ÿé€šçŸ¥ï¼ŒåŒ…å«"ç¨åæé†’"å’Œ"å·²ä¼‘æ¯"æ“ä½œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”” Time for a Break!                â”‚
â”‚                                      â”‚
â”‚  You've been working for 60 minutes. â”‚
â”‚  Take a 5-minute break to recharge.  â”‚
â”‚                                      â”‚
â”‚  [Remind in 15min]   [I'll rest now] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**éªŒæ”¶æ ‡å‡†**

- [ ] è¿ç»­åœ¨çº¿ 60 åˆ†é’Ÿåæ”¶åˆ°ç³»ç»Ÿé€šçŸ¥
- [ ] è®¾ç½®ä¸­å¯è‡ªå®šä¹‰é—´éš”ï¼Œä¿®æ”¹åç«‹å³ç”Ÿæ•ˆ
- [ ] ä¸“æ³¨æ¨¡å¼æœŸé—´ä¸è§¦å‘ä¼‘æ¯æé†’
- [ ] ç©ºé—²/ç¦»çº¿åè®¡æ—¶å™¨é‡ç½®

**æŠ€æœ¯å®ç°è¦ç‚¹**

- Rust ç«¯æ–°å¢ `BreakReminderService`ï¼Œç›‘å¬ `StateMonitor` çš„åœ¨çº¿æ—¶é•¿
- å¤ç”¨ `services/state_monitor.rs` çš„çŠ¶æ€å˜åŒ–äº‹ä»¶
- ä½¿ç”¨ `tauri-plugin-notification` å‘é€ç³»ç»Ÿé€šçŸ¥
- ä¸ F2.1 ä¸“æ³¨æ¨¡å¼è”åŠ¨ï¼šä¸“æ³¨ä¸­è‡ªåŠ¨æŠ‘åˆ¶æé†’
- i18n æ‰©å±• `settings` namespace

---

## 4. Phase 3 â€” ç«äº‰åŠ›æå‡ï¼ˆä¸­æœŸ 3-6 ä¸ªæœˆï¼‰

> ç›®æ ‡ï¼šé€šè¿‡æœ¬åœ° AI å’Œæµè§ˆå™¨æ‰©å±•å¡«è¡¥ä¸å•†ä¸šç«å“çš„åŠŸèƒ½å·®è·

### F3.1 AI ç”Ÿäº§åŠ›æ´å¯Ÿï¼ˆæœ¬åœ°æ¨ç†ï¼‰

**ç”¨æˆ·æ•…äº‹**

> ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘å¸Œæœ›åº”ç”¨èƒ½è‡ªåŠ¨å°†æˆ‘çš„æ´»åŠ¨åˆ†ä¸º"ä¸“æ³¨å·¥ä½œ"ã€"æ²Ÿé€šåä½œ"ã€"å¨±ä¹æ¶ˆé£"ç­‰ç±»åˆ«ï¼Œå¹¶ç”Ÿæˆæ¯æ—¥/å‘¨æŠ¥ï¼Œè¿™æ ·æˆ‘æ— éœ€æ‰‹åŠ¨åˆ†ç±»å°±èƒ½äº†è§£æ—¶é—´è´¨é‡ã€‚

**åŠŸèƒ½éœ€æ±‚**

| ID | éœ€æ±‚ | ä¼˜å…ˆçº§ |
|----|------|--------|
| AI-01 | åŸºäºåº”ç”¨å+æ ‡é¢˜è‡ªåŠ¨å½’ç±»ä¸ºç”Ÿäº§åŠ›ç±»åˆ«ï¼ˆä¸“æ³¨/åä½œ/å¨±ä¹/å…¶ä»–ï¼‰ | P0 |
| AI-02 | æ¯æ—¥ç”Ÿäº§åŠ›è¯„åˆ†ï¼ˆ0-100ï¼‰ | P0 |
| AI-03 | æ¯æ—¥/å‘¨æŠ¥è‡ªåŠ¨ç”Ÿæˆï¼ˆæ–‡æœ¬æ‘˜è¦ï¼‰ | P1 |
| AI-04 | ç”Ÿäº§åŠ›è¶‹åŠ¿å›¾è¡¨ | P1 |
| AI-05 | è‡ªå®šä¹‰åˆ†ç±»è§„åˆ™è¦†ç›– AI ç»“æœ | P1 |
| AI-06 | ä¹ æƒ¯æ¨¡å¼æ£€æµ‹ï¼ˆ"ä½ å‘¨ä¸‰ä¸‹åˆæ•ˆç‡æœ€é«˜"ï¼‰ | P2 |
| AI-07 | æ‰€æœ‰ AI æ¨ç†å‡åœ¨æœ¬åœ°å®Œæˆï¼Œæ•°æ®ä¸ç¦»å¼€è®¾å¤‡ | P0 |

**æ•°æ®æ¨¡å‹**

æ‰©å±• `track_items` è¡¨ï¼š

```sql
ALTER TABLE track_items ADD COLUMN productivity_category TEXT;
-- 'focus' | 'collaboration' | 'entertainment' | 'other'

ALTER TABLE track_items ADD COLUMN productivity_score INTEGER;
-- 0-100

-- æ¯æ—¥æ‘˜è¦ç¼“å­˜è¡¨
CREATE TABLE daily_insights (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    date TEXT NOT NULL UNIQUE,          -- "2026-02-28"
    productivity_score INTEGER,
    focus_percent REAL,
    collaboration_percent REAL,
    entertainment_percent REAL,
    summary_text TEXT,                   -- AI ç”Ÿæˆçš„æ–‡æœ¬æ‘˜è¦
    top_productive_app TEXT,
    top_distraction_app TEXT,
    peak_hour INTEGER,                   -- 0-23, most productive hour
    generated_at INTEGER NOT NULL
);
```

TypeScript æ¥å£ï¼š

```typescript
type ProductivityCategory = 'focus' | 'collaboration' | 'entertainment' | 'other';

interface DailyInsight {
  id?: number;
  date: string;
  productivityScore: number;
  focusPercent: number;
  collaborationPercent: number;
  entertainmentPercent: number;
  summaryText: string;
  topProductiveApp: string;
  topDistractionApp: string;
  peakHour: number;
  generatedAt: number;
}

interface ProductivityRule {
  appPattern: string;
  category: ProductivityCategory;
  score: number;
}
```

**UI äº¤äº’è¯´æ˜**

- å…¥å£ï¼šä¾§è¾¹æ  "Insights" å¯¼èˆªé¡¹
- ä»ªè¡¨ç›˜é£æ ¼ï¼Œçªå‡ºä»Šæ—¥è¯„åˆ†å’Œè¶‹åŠ¿

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Productivity Insights              Feb 28, 2026  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚  Today's Score        Time Breakdown               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚          â”‚        â”‚ â–ˆâ–ˆâ–ˆâ–ˆ Focus     62%  â”‚       â”‚
â”‚  â”‚    78    â”‚        â”‚ â–“â–“â–“â–“ Collab    21%  â”‚       â”‚
â”‚  â”‚  /100    â”‚        â”‚ â–‘â–‘â–‘â–‘ Fun        9%  â”‚       â”‚
â”‚  â”‚ +5 vs    â”‚        â”‚ Â·Â·Â·Â· Other      8%  â”‚       â”‚
â”‚  â”‚ yesterdayâ”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Weekly Trend                                      â”‚
â”‚  100â”‚                                              â”‚
â”‚   80â”‚  â—â”€â”€â—     â—                                  â”‚
â”‚   60â”‚       â•²  â•± â•²  â—                              â”‚
â”‚   40â”‚        â—â•±                                    â”‚
â”‚   20â”‚                                              â”‚
â”‚     â””â”€â”€Monâ”€â”€Tueâ”€â”€Wedâ”€â”€Thuâ”€â”€Friâ”€â”€                   â”‚
â”‚                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’¡ Insight: Your peak productivity is on          â”‚
â”‚     Wednesdays between 10am-12pm.                  â”‚
â”‚     Consider scheduling deep work during this time.â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**éªŒæ”¶æ ‡å‡†**

- [ ] è¿½è¸ªé¡¹è‡ªåŠ¨è·å¾—ç”Ÿäº§åŠ›åˆ†ç±»æ ‡ç­¾
- [ ] æ¯æ—¥è¯„åˆ†åŸºäºåˆ†ç±»æƒé‡è‡ªåŠ¨è®¡ç®—
- [ ] è§„åˆ™å¼•æ“ä¼˜å…ˆçº§é«˜äº AI æ¨ç†ç»“æœ
- [ ] å‘¨è¶‹åŠ¿å›¾æ•°æ®å‡†ç¡®
- [ ] æ‰€æœ‰æ¨ç†åœ¨æœ¬åœ°å®Œæˆï¼Œæ— ç½‘ç»œè¯·æ±‚

**æŠ€æœ¯å®ç°è¦ç‚¹**

- **æ··åˆæ–¹æ¡ˆ**ï¼šè§„åˆ™å¼•æ“ä¼˜å…ˆ + æœ¬åœ°å°æ¨¡å‹å…œåº•
  - è§„åˆ™å¼•æ“ï¼šç»´æŠ¤åº”ç”¨â†’ç±»åˆ«çš„æ˜ å°„è¡¨ï¼Œå¤ç”¨ F2.2 çš„ `classification_rules` æ¶æ„
  - æœ¬åœ°æ¨¡å‹ï¼šä½¿ç”¨ Tauri Sidecar æ‰“åŒ…è½»é‡ ONNX æ¨¡å‹ï¼ˆå¦‚ TinyBERTï¼‰ï¼Œé€šè¿‡ `ort` crate æ¨ç†
- è¯„åˆ†ç®—æ³•ï¼š`score = focus% Ã— 100 + collab% Ã— 60 + other% Ã— 30 - entertainment% Ã— 20`
- æ¯æ—¥æ‘˜è¦åœ¨ä¸€å¤©ç»“æŸæ—¶æˆ–æ¬¡æ—¥é¦–æ¬¡æ‰“å¼€æ—¶ç”Ÿæˆ
- ç¼“å­˜åˆ° `daily_insights` è¡¨ï¼Œé¿å…é‡å¤è®¡ç®—
- i18n æ–°å¢ `insights` namespace

---

### F3.2 æµè§ˆå™¨æ‰©å±•ï¼ˆChrome / Firefoxï¼‰

**ç”¨æˆ·æ•…äº‹**

> ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘å¸Œæœ›æµè§ˆå™¨æ‰©å±•èƒ½ç²¾ç¡®è¿½è¸ªæˆ‘è®¿é—®çš„ç½‘ç«™å’Œé¡µé¢æ ‡é¢˜ï¼Œè¿™æ ·æˆ‘èƒ½äº†è§£ç½‘ç«™çº§åˆ«çš„æ—¶é—´æ¶ˆè€—ï¼Œè€Œä¸ä»…ä»…æ˜¯"Chrome"è¿™ä¸ªåº”ç”¨ã€‚

**åŠŸèƒ½éœ€æ±‚**

| ID | éœ€æ±‚ | ä¼˜å…ˆçº§ |
|----|------|--------|
| BE-01 | Chrome æ‰©å±•ï¼šè¿½è¸ªå½“å‰æ ‡ç­¾é¡µ URL å’Œæ ‡é¢˜ | P0 |
| BE-02 | Firefox æ‰©å±•ï¼šåŒä¸Š | P1 |
| BE-03 | æ‰©å±•ä¸æ¡Œé¢åº”ç”¨é€šè¿‡æœ¬åœ°æ¶ˆæ¯ä¼ é€’é€šä¿¡ | P0 |
| BE-04 | æ‰©å±• popup æ˜¾ç¤ºä»Šæ—¥ç½‘ç«™æ—¶é—´ç»Ÿè®¡ | P1 |
| BE-05 | ç½‘ç«™åŸŸåè‡ªåŠ¨æå–å’Œåˆ†ç±» | P0 |
| BE-06 | éšç§æ¨¡å¼ä¸‹ä¸è¿½è¸ª | P0 |

**æ•°æ®æ¨¡å‹**

å¤ç”¨ç°æœ‰ `track_items` è¡¨ï¼Œ`url` å’Œ `domain` å­—æ®µå·²å­˜åœ¨ï¼ˆ`database.rs:12-13`ï¼‰ã€‚æ‰©å±•æä¾›çš„æ•°æ®ç›´æ¥å¡«å……è¿™äº›å­—æ®µã€‚

```typescript
// Browser extension -> Desktop app message
interface BrowserTabInfo {
  url: string;
  title: string;
  domain: string;
  incognito: boolean;
}
```

**UI äº¤äº’è¯´æ˜**

- æ‰©å±• Popupï¼šç´§å‡‘çš„ä»Šæ—¥ç½‘ç«™æ—¶é—´ç»Ÿè®¡
- æ¡Œé¢ç«¯ï¼šæœç´¢å’Œç»Ÿè®¡é¡µé¢è‡ªåŠ¨å±•ç¤º URL/åŸŸåç»´åº¦æ•°æ®

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Timlyzer          [Active â—] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Today's Web Time: 3h 45m    â”‚
â”‚                              â”‚
â”‚  github.com        1h 20m    â”‚
â”‚  stackoverflow.com   45m     â”‚
â”‚  youtube.com         30m     â”‚
â”‚  twitter.com         25m     â”‚
â”‚  others              45m     â”‚
â”‚                              â”‚
â”‚  [Open Timlyzer]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**éªŒæ”¶æ ‡å‡†**

- [ ] Chrome æ‰©å±•èƒ½æ­£ç¡®è·å–å½“å‰æ ‡ç­¾é¡µçš„ URL å’Œæ ‡é¢˜
- [ ] æ•°æ®é€šè¿‡ Native Messaging å®æ—¶ä¼ é€åˆ°æ¡Œé¢åº”ç”¨
- [ ] æ—¶é—´çº¿å’Œç»Ÿè®¡ä¸­èƒ½çœ‹åˆ°ç½‘ç«™çº§åˆ«çš„è¿½è¸ªæ•°æ®
- [ ] éšç§æ¨¡å¼ä¸‹æ‰©å±•è‡ªåŠ¨åœæ­¢è¿½è¸ª

**æŠ€æœ¯å®ç°è¦ç‚¹**

- æµè§ˆå™¨æ‰©å±•ä½¿ç”¨ Chrome Extension Manifest V3 / Firefox WebExtension API
- é€šä¿¡æ–¹æ¡ˆï¼šChrome Native Messaging Hostï¼ˆRust ç¼–å†™ï¼‰ï¼ŒTauri Sidecar æœºåˆ¶æ‰“åŒ…
- æ‰©å±•ä»£ç ç‹¬ç«‹ä»“åº“æˆ– `packages/browser-extension/` å­ç›®å½•
- ç°æœ‰ `active_window.rs` æ£€æµ‹åˆ°æµè§ˆå™¨æ—¶ï¼Œåˆ‡æ¢ä¸ºä½¿ç”¨æ‰©å±•æ¨é€çš„ç²¾ç¡® URL/æ ‡é¢˜
- doc-03 å·²éªŒè¯ Sidecar äºŒè¿›åˆ¶æ‰“åŒ…çš„å¯è¡Œæ€§

---

### F3.3 é«˜çº§è¶‹åŠ¿åˆ†ææŠ¥è¡¨

**ç”¨æˆ·æ•…äº‹**

> ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘å¸Œæœ›èƒ½çœ‹åˆ°æ›´ä¸°å¯Œçš„è¶‹åŠ¿åˆ†æï¼ŒåŒ…æ‹¬æœˆåº¦/å­£åº¦æŠ¥å‘Šå’Œä¹ æƒ¯æ¨¡å¼è¯†åˆ«ï¼Œè¿™æ ·æˆ‘èƒ½é•¿æœŸè·Ÿè¸ªå¹¶ä¼˜åŒ–æˆ‘çš„æ—¶é—´ä½¿ç”¨ã€‚

**åŠŸèƒ½éœ€æ±‚**

| ID | éœ€æ±‚ | ä¼˜å…ˆçº§ |
|----|------|--------|
| TR-01 | æœˆåº¦æ±‡æ€»æŠ¥è¡¨ï¼ˆå¯å¯¼å‡º PDFï¼‰ | P1 |
| TR-02 | å­£åº¦è¶‹åŠ¿å¯¹æ¯” | P2 |
| TR-03 | å·¥ä½œæ—¶é•¿æŒ‰æ˜ŸæœŸåˆ†å¸ƒç»Ÿè®¡ | P1 |
| TR-04 | åº”ç”¨ä½¿ç”¨æ—¶é•¿ç¯æ¯”/åŒæ¯”å˜åŒ– | P1 |
| TR-05 | å¯åˆ†äº«çš„æŠ¥è¡¨å¿«ç…§ï¼ˆå›¾ç‰‡å¯¼å‡ºï¼‰ | P2 |
| TR-06 | æœç´¢ç»“æœæ’åºåŠŸèƒ½ | P1 |

> æ³¨ï¼šTR-06 æ¥æºäº doc-04 SE-06 å»¶ååŠŸèƒ½å›æ”¶

**æ•°æ®æ¨¡å‹**

æ— éœ€æ–°å¢è¡¨ã€‚åŸºäºç°æœ‰æ•°æ®çš„èšåˆæŸ¥è¯¢ + F3.1 çš„ `daily_insights` ç¼“å­˜ã€‚

```typescript
interface MonthlyReport {
  month: string;                    // "2026-02"
  totalOnlineHours: number;
  avgDailyHours: number;
  avgProductivityScore: number;
  topApps: Array<{ app: string; hours: number }>;
  topProjects: Array<{ project: string; hours: number }>;
  weekdayDistribution: number[];    // [Mon, Tue, ..., Sun] hours
  comparedToLastMonth: number;      // percent change
}
```

**UI äº¤äº’è¯´æ˜**

- å…¥å£ï¼šSummary é¡µé¢æ–°å¢ "Reports" tab

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Monthly Report              February 2026       â”‚
â”‚                                        [Export â†—] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Total: 168h  |  Daily Avg: 7.2h  |  Score: 74  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Top Apps              â”‚  Weekday Distribution    â”‚
â”‚  1. VS Code    48h     â”‚  Mon â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  8.1h     â”‚
â”‚  2. Chrome     32h     â”‚  Tue â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   7.5h     â”‚
â”‚  3. Slack      18h     â”‚  Wed â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  8.3h     â”‚
â”‚  4. Terminal   12h     â”‚  Thu â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   7.2h     â”‚
â”‚  5. Figma       8h     â”‚  Fri â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    6.5h     â”‚
â”‚                        â”‚  Sat â–ˆâ–ˆâ–ˆ       3.2h     â”‚
â”‚                        â”‚  Sun â–ˆâ–ˆ        2.1h     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  vs January: +8% online time, +5 score           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**éªŒæ”¶æ ‡å‡†**

- [ ] æœˆåº¦æŠ¥è¡¨æ•°æ®å‡†ç¡®ï¼Œå„ç»´åº¦ç»Ÿè®¡æ­£ç¡®
- [ ] å¯å¯¼å‡ºä¸ºå›¾ç‰‡æˆ– PDF
- [ ] ç¯æ¯”æ•°æ®æ­£ç¡®è®¡ç®—ç™¾åˆ†æ¯”å˜åŒ–
- [ ] æœç´¢ç»“æœæ”¯æŒæŒ‰æ—¶é•¿/æ—¥æœŸ/åº”ç”¨åæ’åº

**æŠ€æœ¯å®ç°è¦ç‚¹**

- Rust ç«¯æ–°å¢ `get_monthly_report(year, month)` å‘½ä»¤ï¼Œæ‰§è¡Œèšåˆ SQL
- å›¾ç‰‡å¯¼å‡ºä½¿ç”¨ `html2canvas` æˆ– Recharts çš„ SVG å¯¼å‡º
- PDF å¯¼å‡ºå¯ä½¿ç”¨ `jspdf` æˆ–æœåŠ¡ç«¯æ¸²æŸ“
- å¤ç”¨ç°æœ‰ Recharts å›¾è¡¨ç»„ä»¶
- æœç´¢æ’åºæ‰©å±•ç°æœ‰ `SearchParams`ï¼Œæ·»åŠ  `sortBy` å’Œ `sortOrder` å­—æ®µ

---

### F3.4 åº”ç”¨å¿½ç•¥ / è¿‡æ»¤è§„åˆ™

**ç”¨æˆ·æ•…äº‹**

> ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘å¸Œæœ›èƒ½å°†æŸäº›åº”ç”¨ï¼ˆå¦‚é”å±ã€ç³»ç»Ÿåå¥½è®¾ç½®ï¼‰ä»è¿½è¸ªä¸­æ’é™¤ï¼Œè¿™æ ·æ—¶é—´çº¿å’Œç»Ÿè®¡ä¸ä¼šè¢«æ— å…³æ´»åŠ¨å¹²æ‰°ã€‚

**åŠŸèƒ½éœ€æ±‚**

| ID | éœ€æ±‚ | ä¼˜å…ˆçº§ |
|----|------|--------|
| IG-01 | é…ç½®å¿½ç•¥ç‰¹å®šåº”ç”¨åï¼ˆç²¾ç¡®åŒ¹é…ï¼‰ | P0 |
| IG-02 | é…ç½®å¿½ç•¥åº”ç”¨åæ¨¡å¼ï¼ˆé€šé…ç¬¦åŒ¹é…ï¼‰ | P1 |
| IG-03 | é…ç½®å¿½ç•¥ç‰¹å®šæ ‡é¢˜å…³é”®è¯ | P1 |
| IG-04 | é¢„è®¾å¸¸è§å¿½ç•¥é¡¹ï¼ˆå¦‚ "Finder", "SystemPreferences"ï¼‰ | P1 |
| IG-05 | ä»æ—¶é—´çº¿å³é”®èœå•å¿«æ·å¿½ç•¥ | P2 |

> æ³¨ï¼šæ¥æºäº doc-04 TS-03 å»¶ååŠŸèƒ½å›æ”¶

**æ•°æ®æ¨¡å‹**

æ‰©å±• `app_settings` è¡¨æˆ–æ–°å¢ä¸“ç”¨è¡¨ï¼š

```sql
CREATE TABLE ignore_rules (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    rule_type TEXT NOT NULL,     -- 'app_exact' | 'app_pattern' | 'title_keyword'
    pattern TEXT NOT NULL,
    enabled INTEGER NOT NULL DEFAULT 1,
    created_at INTEGER NOT NULL
);
```

TypeScript æ¥å£ï¼š

```typescript
interface IgnoreRule {
  id?: number;
  ruleType: 'app_exact' | 'app_pattern' | 'title_keyword';
  pattern: string;
  enabled: boolean;
  createdAt: number;
}
```

**UI äº¤äº’è¯´æ˜**

- å…¥å£ï¼šSettings â†’ Tracking â†’ Ignore Rules

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ignore Rules                   [+ Add]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ“  App: "Finder"           [exact]  [Ã—] â”‚
â”‚  âœ“  App: "System*"          [pattern] [Ã—] â”‚
â”‚  âœ“  Title: "Password"       [keyword] [Ã—] â”‚
â”‚  â—‹  App: "Slack"            [exact]  [Ã—] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Preset: [Add common system apps]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**éªŒæ”¶æ ‡å‡†**

- [ ] æ·»åŠ å¿½ç•¥è§„åˆ™åï¼ŒåŒ¹é…çš„çª—å£ä¸å†è¢«è¿½è¸ª
- [ ] é€šé…ç¬¦æ¨¡å¼æ­£ç¡®åŒ¹é…ï¼ˆå¦‚ "System*" åŒ¹é… "SystemPreferences"ï¼‰
- [ ] å·²å­˜åœ¨çš„åŒ¹é…æ•°æ®ä¸å—å½±å“ï¼ˆä»…å½±å“æ–°è¿½è¸ªï¼‰
- [ ] æ—¶é—´çº¿è¿½è¸ªé¡¹å³é”®èœå•å¯å¿«é€Ÿæ·»åŠ å¿½ç•¥è§„åˆ™

**æŠ€æœ¯å®ç°è¦ç‚¹**

- åœ¨ `services/tracker.rs` çš„è¿½è¸ªå¾ªç¯ä¸­ï¼Œè·å–æ´»åŠ¨çª—å£åå…ˆæ£€æŸ¥å¿½ç•¥è§„åˆ™
- å¤ç”¨ `app_settings` è¡¨çš„æŸ¥è¯¢æ¨¡å¼ï¼Œæ–°å¢ `get_ignore_rules()` ç¼“å­˜
- è§„åˆ™å˜æ›´æ—¶é€šè¿‡ Tauri äº‹ä»¶é€šçŸ¥ Rust ç«¯åˆ·æ–°ç¼“å­˜
- i18n æ‰©å±• `settings` namespace

---

## 5. Phase 4 â€” ç”Ÿæ€å»ºè®¾ï¼ˆé•¿æœŸ 6-12 ä¸ªæœˆï¼‰

> ç›®æ ‡ï¼šæ„å»ºå¯æ‰©å±•çš„ç”Ÿæ€ç³»ç»Ÿï¼Œæ¢ç´¢å•†ä¸šåŒ–è·¯å¾„

### F4.1 æ’ä»¶ / æ‰©å±•ç³»ç»Ÿ

**ç”¨æˆ·æ•…äº‹**

> ä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘å¸Œæœ›èƒ½ä¸º Timlyzer ç¼–å†™è‡ªå®šä¹‰æ•°æ®æºæ’ä»¶ï¼ˆå¦‚ IDE æ´»åŠ¨è¿½è¸ªï¼‰ï¼Œè¿™æ ·æˆ‘èƒ½å°†æ›´å¤šç»´åº¦çš„æ—¶é—´æ•°æ®æ•´åˆåˆ°ä¸€ä¸ªå·¥å…·ä¸­ã€‚

**åŠŸèƒ½éœ€æ±‚**

| ID | éœ€æ±‚ | ä¼˜å…ˆçº§ |
|----|------|--------|
| PL-01 | å®šä¹‰æ’ä»¶ API è§„èŒƒï¼ˆæ•°æ®æºã€å¯è§†åŒ–ã€å¯¼å‡ºä¸‰ç±»ï¼‰ | P0 |
| PL-02 | æ’ä»¶å‘ç°ä¸å®‰è£…ï¼ˆæœ¬åœ°ç›®å½•åŠ è½½ï¼‰ | P0 |
| PL-03 | æ’ä»¶æ²™ç®±æ‰§è¡Œç¯å¢ƒ | P0 |
| PL-04 | æ’ä»¶é…ç½® UI è‡ªåŠ¨ç”Ÿæˆ | P1 |
| PL-05 | å®˜æ–¹ç¤ºä¾‹æ’ä»¶ï¼ˆIDE è¿½è¸ªã€éŸ³ä¹è¿½è¸ªï¼‰ | P1 |
| PL-06 | æ’ä»¶å¸‚åœºï¼ˆç¤¾åŒºè´¡çŒ®ï¼‰ | P2 |

**æ•°æ®æ¨¡å‹**

```sql
-- æ’ä»¶æ³¨å†Œè¡¨
CREATE TABLE plugins (
    id TEXT PRIMARY KEY,                -- "com.timlyzer.vscode-tracker"
    name TEXT NOT NULL,
    version TEXT NOT NULL,
    description TEXT,
    author TEXT,
    plugin_type TEXT NOT NULL,          -- 'data_source' | 'visualization' | 'export'
    entry_point TEXT NOT NULL,          -- relative path to plugin main file
    enabled INTEGER NOT NULL DEFAULT 1,
    config_schema TEXT,                 -- JSON Schema for plugin config
    config_values TEXT,                 -- JSON config values
    installed_at INTEGER NOT NULL
);

-- æ’ä»¶äº§ç”Ÿçš„è¿½è¸ªæ•°æ®
-- å¤ç”¨ track_items è¡¨ï¼Œé€šè¿‡ task_name å‰ç¼€åŒºåˆ†: "Plugin:vscode-tracker"
```

TypeScript æ¥å£ï¼ˆæ’ä»¶ APIï¼‰ï¼š

```typescript
// Plugin manifest (plugin.json)
interface PluginManifest {
  id: string;
  name: string;
  version: string;
  description: string;
  author: string;
  type: 'data_source' | 'visualization' | 'export';
  entryPoint: string;
  permissions: string[];
  configSchema?: JSONSchema;
}

// Plugin API available to plugins
interface TimlyzerPluginAPI {
  // Data operations
  createTrackItem(item: Omit<TrackItem, 'id'>): Promise<TrackItem>;
  queryTrackItems(params: SearchParams): Promise<SearchResult>;

  // Settings
  getConfig(): Promise<Record<string, unknown>>;
  setConfig(config: Record<string, unknown>): Promise<void>;

  // Events
  onTrackItemCreated(callback: (item: TrackItem) => void): void;
  onSettingsChanged(callback: (settings: Settings) => void): void;

  // UI (for visualization plugins)
  registerWidget(widget: WidgetDefinition): void;
}
```

**UI äº¤äº’è¯´æ˜**

- å…¥å£ï¼šSettings â†’ Plugins

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Plugins                         [Install fromâ€¦] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ“  VS Code Tracker       v1.0.0    [Configure]  â”‚
â”‚     Track coding activity from VS Code            â”‚
â”‚                                                    â”‚
â”‚  âœ“  Spotify Tracker        v0.3.0    [Configure]  â”‚
â”‚     Track music listening while working            â”‚
â”‚                                                    â”‚
â”‚  â—‹  Jira Time Logger       v1.2.0    [Configure]  â”‚
â”‚     Export time entries to Jira                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Browse Plugin Market]                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**éªŒæ”¶æ ‡å‡†**

- [ ] å¯ä»æœ¬åœ°ç›®å½•åŠ è½½ç¬¦åˆè§„èŒƒçš„æ’ä»¶
- [ ] æ’ä»¶åœ¨æ²™ç®±ç¯å¢ƒä¸­è¿è¡Œï¼Œä¸èƒ½è®¿é—®è¶…å‡ºæƒé™çš„ API
- [ ] æ•°æ®æºæ’ä»¶äº§ç”Ÿçš„æ•°æ®å‡ºç°åœ¨æ—¶é—´çº¿ä¸­
- [ ] æ’ä»¶å¯è¢«å¯ç”¨/ç¦ç”¨/å¸è½½

**æŠ€æœ¯å®ç°è¦ç‚¹**

- æ’ä»¶è¿è¡Œæ—¶ï¼šRust ç«¯ä½¿ç”¨ Deno/QuickJS åµŒå…¥å¼ JS è¿è¡Œæ—¶ï¼Œæˆ– WASM æ²™ç®±
- å‚è€ƒ ActivityWatch çš„ watcher æ¶æ„ï¼Œä½†ä½¿ç”¨æ›´ä¸¥æ ¼çš„æƒé™æ§åˆ¶
- æ’ä»¶é€šè¿‡ IPC ä¸ä¸»è¿›ç¨‹é€šä¿¡ï¼Œéµå¾ªç°æœ‰ `commands.rs` çš„å‘½ä»¤æ¨¡å¼
- æ’ä»¶ç›®å½•ï¼š`~/.timlyzer/plugins/<plugin-id>/`
- doc-03 éªŒè¯äº† Sidecar æ‰“åŒ…å¤–éƒ¨äºŒè¿›åˆ¶çš„å¯è¡Œæ€§

---

### F4.2 å¯é€‰äº‘åŒæ­¥ï¼ˆE2E åŠ å¯†ï¼‰

**ç”¨æˆ·æ•…äº‹**

> ä½œä¸ºä½¿ç”¨å¤šå°ç”µè„‘çš„ç”¨æˆ·ï¼Œæˆ‘å¸Œæœ›èƒ½å°†æ—¶é—´è¿½è¸ªæ•°æ®åœ¨è®¾å¤‡é—´åŒæ­¥ï¼ŒåŒæ—¶ç¡®ä¿æ•°æ®ç«¯åˆ°ç«¯åŠ å¯†ï¼Œè¿™æ ·æˆ‘èƒ½åœ¨ä»»ä½•è®¾å¤‡æŸ¥çœ‹å®Œæ•´çš„æ—¶é—´è®°å½•ã€‚

**åŠŸèƒ½éœ€æ±‚**

| ID | éœ€æ±‚ | ä¼˜å…ˆçº§ |
|----|------|--------|
| CS-01 | å¯é€‰çš„äº‘åŒæ­¥å¼€å…³ï¼ˆé»˜è®¤å…³é—­ï¼‰ | P0 |
| CS-02 | ç«¯åˆ°ç«¯åŠ å¯†ï¼ˆåŠ å¯†å¯†é’¥ä»…å­˜å‚¨åœ¨ç”¨æˆ·è®¾å¤‡ï¼‰ | P0 |
| CS-03 | æ”¯æŒè‡ªæ‰˜ç®¡åŒæ­¥æœåŠ¡å™¨ | P1 |
| CS-04 | å†²çªè§£å†³ç­–ç•¥ï¼ˆLast-Write-Wins + æ‰‹åŠ¨åˆå¹¶ï¼‰ | P1 |
| CS-05 | å¢é‡åŒæ­¥ï¼ˆä»…ä¼ è¾“å·®é‡æ•°æ®ï¼‰ | P0 |
| CS-06 | åŒæ­¥çŠ¶æ€æŒ‡ç¤ºå™¨ï¼ˆæœ€ååŒæ­¥æ—¶é—´ / é”™è¯¯æç¤ºï¼‰ | P1 |

**æ•°æ®æ¨¡å‹**

```sql
-- åŒæ­¥å…ƒæ•°æ®è¡¨
CREATE TABLE sync_metadata (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    device_id TEXT NOT NULL,
    last_sync_at INTEGER,
    sync_cursor TEXT,           -- å¢é‡åŒæ­¥æ¸¸æ ‡
    server_url TEXT,
    encrypted_key_hash TEXT     -- ç”¨äºéªŒè¯å¯†é’¥æ­£ç¡®æ€§
);

-- å˜æ›´æ—¥å¿—è¡¨ï¼ˆç”¨äºå¢é‡åŒæ­¥ï¼‰
CREATE TABLE change_log (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    table_name TEXT NOT NULL,
    row_id INTEGER NOT NULL,
    operation TEXT NOT NULL,    -- 'INSERT' | 'UPDATE' | 'DELETE'
    changed_at INTEGER NOT NULL,
    synced INTEGER NOT NULL DEFAULT 0
);

CREATE INDEX idx_change_log_synced ON change_log(synced, changed_at);
```

TypeScript æ¥å£ï¼š

```typescript
interface SyncSettings {
  enabled: boolean;
  serverUrl: string;           // default: official server or self-hosted
  deviceId: string;
  lastSyncAt?: number;
  syncInterval: number;        // minutes, default 15
}

interface SyncStatus {
  state: 'idle' | 'syncing' | 'error' | 'offline';
  lastSyncAt?: number;
  pendingChanges: number;
  errorMessage?: string;
}
```

**UI äº¤äº’è¯´æ˜**

- å…¥å£ï¼šSettings â†’ Sync
- çŠ¶æ€æ æ˜¾ç¤ºåŒæ­¥çŠ¶æ€å›¾æ ‡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Cloud Sync                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Status: âœ“ Synced (2 minutes ago)                â”‚
â”‚  Server: https://sync.timlyzer.com               â”‚
â”‚  Device: MacBook Pro                              â”‚
â”‚  Pending changes: 0                               â”‚
â”‚                                                    â”‚
â”‚  âš ï¸ Your data is end-to-end encrypted.            â”‚
â”‚  Only you hold the encryption key.                â”‚
â”‚                                                    â”‚
â”‚  Encryption Key: [â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢]  [Show] [Copy]     â”‚
â”‚                                                    â”‚
â”‚  [Sync Now]  [Disconnect]                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Advanced                                         â”‚
â”‚  Sync interval: [15 min â–¼]                       â”‚
â”‚  Self-hosted server: [_____________]              â”‚
â”‚  [ ] Auto-resolve conflicts (Last Write Wins)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**éªŒæ”¶æ ‡å‡†**

- [ ] å¼€å¯åŒæ­¥åï¼Œä¸¤å°è®¾å¤‡çš„æ•°æ®ä¿æŒä¸€è‡´
- [ ] åŠ å¯†å¯†é’¥ä»…å­˜å‚¨åœ¨ç”¨æˆ·è®¾å¤‡ï¼ŒæœåŠ¡å™¨æ— æ³•è§£å¯†æ•°æ®
- [ ] ç½‘ç»œæ–­å¼€æ—¶æ­£å¸¸ä½¿ç”¨ï¼Œæ¢å¤åè‡ªåŠ¨åŒæ­¥
- [ ] è‡ªæ‰˜ç®¡æœåŠ¡å™¨å¯æ­£å¸¸å·¥ä½œ

**æŠ€æœ¯å®ç°è¦ç‚¹**

- åŠ å¯†ï¼šä½¿ç”¨ `ring` æˆ– `aes-gcm` crate å®ç° AES-256-GCM ç«¯åˆ°ç«¯åŠ å¯†
- åŒæ­¥åè®®ï¼šåŸºäºå˜æ›´æ—¥å¿—çš„å¢é‡åŒæ­¥ï¼Œä½¿ç”¨ SQLite trigger è‡ªåŠ¨è®°å½•å˜æ›´
- æ–¹æ¡ˆé€‰é¡¹ï¼šCRDTsï¼ˆ`automerge`ï¼‰æˆ– SQLite + Litestream
- åŒæ­¥æœåŠ¡ç«¯ï¼šè½»é‡ Rust HTTP æœåŠ¡ï¼ˆå¯ Docker éƒ¨ç½²ï¼‰ï¼Œä»…å­˜å‚¨åŠ å¯†åçš„ blob
- å†²çªè§£å†³ï¼šé»˜è®¤ LWWï¼ˆLast-Write-Winsï¼‰ï¼Œä¿ç•™å†²çªç‰ˆæœ¬ä¾›æ‰‹åŠ¨é€‰æ‹©
- ä¿æŒæ ¸å¿ƒåŸåˆ™ï¼š**åŒæ­¥æ˜¯å¯é€‰çš„**ï¼Œå…³é—­æ—¶è¡Œä¸ºä¸ MVP å®Œå…¨ä¸€è‡´

---

### F4.3 ç§»åŠ¨ç«¯ App

**ç”¨æˆ·æ•…äº‹**

> ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘å¸Œæœ›åœ¨æ‰‹æœºä¸ŠæŸ¥çœ‹æ¯æ—¥æ—¶é—´æŠ¥å‘Šå’Œæ‰‹åŠ¨è®°å½•ç¦»å¼€ç”µè„‘çš„ä»»åŠ¡ï¼ˆå¦‚ä¼šè®®ã€é€šå‹¤ï¼‰ï¼Œè¿™æ ·æˆ‘èƒ½è·å¾—å®Œæ•´çš„æ—¶é—´ç”»åƒã€‚

**åŠŸèƒ½éœ€æ±‚**

| ID | éœ€æ±‚ | ä¼˜å…ˆçº§ |
|----|------|--------|
| MB-01 | iOS / Android App | P0 |
| MB-02 | æŸ¥çœ‹æ¯æ—¥/å‘¨æ—¶é—´çº¿å’Œç»Ÿè®¡ | P0 |
| MB-03 | æ‰‹åŠ¨åˆ›å»º/åœæ­¢ä»»åŠ¡ | P1 |
| MB-04 | æ¨é€é€šçŸ¥ï¼ˆæ¯æ—¥æ€»ç»“ã€ä¸“æ³¨æé†’ï¼‰ | P1 |
| MB-05 | ä¸æ¡Œé¢ç«¯æ•°æ®åŒæ­¥ï¼ˆä¾èµ– F4.2ï¼‰ | P0 |
| MB-06 | è½»é‡è®¾è®¡ï¼Œå¿«é€ŸåŠ è½½ | P0 |

**æ•°æ®æ¨¡å‹**

å¤ç”¨æ¡Œé¢ç«¯æ•°æ®æ¨¡å‹ï¼Œé€šè¿‡ F4.2 çš„äº‘åŒæ­¥è·å–æ•°æ®ã€‚ç§»åŠ¨ç«¯æœ¬åœ°ä»…ç¼“å­˜è¿‘ 7 å¤©æ•°æ®ã€‚

```typescript
interface MobileSettings {
  dailySummaryNotification: boolean;
  notificationTime: string;     // "20:00"
  cacheRetentionDays: number;   // default 7
}
```

**UI äº¤äº’è¯´æ˜**

- ç§»åŠ¨ç«¯ä¸ºåªè¯» + æ‰‹åŠ¨ä»»åŠ¡æ¨¡å¼ï¼Œä¸åšè‡ªåŠ¨è¿½è¸ª

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Timlyzer    Feb 28   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                       â”‚
â”‚  Today: 6h 45m        â”‚
â”‚  Score: 78/100        â”‚
â”‚                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆ 62% Focus â”‚  â”‚
â”‚  â”‚  â–“â–“â–“â–“ 21% Comm  â”‚  â”‚
â”‚  â”‚  â–‘â–‘â–‘â–‘  9% Fun   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                       â”‚
â”‚  Top Apps:            â”‚
â”‚  VS Code     3h 20m  â”‚
â”‚  Chrome      1h 45m  â”‚
â”‚  Slack         50m   â”‚
â”‚                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Start Task]         â”‚
â”‚                       â”‚
â”‚  Running: Meeting     â”‚
â”‚  Duration: 0:32       â”‚
â”‚  [Stop]               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š  ğŸ   â±  âš™       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**éªŒæ”¶æ ‡å‡†**

- [ ] iOS å’Œ Android ä¸Šèƒ½æ­£ç¡®å®‰è£…å’Œè¿è¡Œ
- [ ] æ•°æ®é€šè¿‡äº‘åŒæ­¥ä¸æ¡Œé¢ç«¯ä¿æŒä¸€è‡´
- [ ] æ‰‹åŠ¨åˆ›å»ºçš„ä»»åŠ¡åŒæ­¥å›æ¡Œé¢ç«¯æ—¶é—´çº¿
- [ ] æ¯æ—¥æ€»ç»“æ¨é€é€šçŸ¥æ­£å¸¸é€è¾¾

**æŠ€æœ¯å®ç°è¦ç‚¹**

- **Tauri 2.x å·²æ”¯æŒç§»åŠ¨ç«¯æ„å»º**ï¼ˆdoc-03 éªŒè¯ï¼‰ï¼Œå¯æœ€å¤§åŒ–ä»£ç å¤ç”¨
- å‰ç«¯ä»£ç é€šè¿‡å“åº”å¼è®¾è®¡é€‚é…ç§»åŠ¨ç«¯ï¼Œæˆ–æ–°å»ºç§»åŠ¨ç«¯ä¸“ç”¨é¡µé¢é›†
- ç§»åŠ¨ç«¯ä¸éœ€è¦åå°è¿½è¸ªæœåŠ¡ï¼Œä»…éœ€ API å±‚ + UI å±‚
- æ¨é€é€šçŸ¥ä½¿ç”¨ `tauri-plugin-notification`ï¼ˆç§»åŠ¨ç«¯ï¼‰
- ä¾èµ– F4.2 äº‘åŒæ­¥ä½œä¸ºæ•°æ®æ¡¥æ¢

---

### F4.4 å›¢é˜Ÿç‰ˆï¼ˆå•†ä¸šåŒ–æ¢ç´¢ï¼‰

**ç”¨æˆ·æ•…äº‹**

> ä½œä¸ºå›¢é˜Ÿç®¡ç†è€…ï¼Œæˆ‘å¸Œæœ›èƒ½æŸ¥çœ‹å›¢é˜Ÿæˆå‘˜çš„æ—¶é—´åˆ†é…èšåˆç»Ÿè®¡ï¼ˆéœ€è·å¾—æˆå‘˜æˆæƒï¼‰ï¼Œè¿™æ ·æˆ‘èƒ½æ›´å¥½åœ°ç†è§£é¡¹ç›®èµ„æºæŠ•å…¥ã€‚

**åŠŸèƒ½éœ€æ±‚**

| ID | éœ€æ±‚ | ä¼˜å…ˆçº§ |
|----|------|--------|
| TM-01 | å›¢é˜Ÿåˆ›å»ºä¸æˆå‘˜é‚€è¯· | P0 |
| TM-02 | æˆå‘˜æˆæƒæ§åˆ¶ï¼ˆé€‰æ‹©å…±äº«å“ªäº›æ•°æ®ï¼‰ | P0 |
| TM-03 | å›¢é˜Ÿçº§é¡¹ç›®æ—¶é—´æ±‡æ€» | P0 |
| TM-04 | åŒ¿ååŒ–èšåˆç»Ÿè®¡ï¼ˆä¿æŠ¤ä¸ªäººéšç§ï¼‰ | P1 |
| TM-05 | ç®¡ç†è€…ä»ªè¡¨ç›˜ | P1 |
| TM-06 | å›¢é˜Ÿç‰ˆè®¢é˜…å®šä»·æ¨¡å‹ | P1 |

**æ•°æ®æ¨¡å‹**

å›¢é˜Ÿç‰ˆéœ€è¦æœåŠ¡ç«¯æ”¯æŒï¼Œæ•°æ®æ¨¡å‹ä¸»è¦åœ¨æœåŠ¡ç«¯ï¼š

```typescript
// Server-side models
interface Team {
  id: string;
  name: string;
  ownerId: string;
  createdAt: number;
}

interface TeamMember {
  userId: string;
  teamId: string;
  role: 'owner' | 'admin' | 'member';
  sharingLevel: 'none' | 'aggregate' | 'detailed';
  joinedAt: number;
}

interface TeamProjectSummary {
  projectName: string;
  totalHours: number;
  memberCount: number;
  weeklyTrend: number[];
}
```

**UI äº¤äº’è¯´æ˜**

- å…¥å£ï¼šä¾§è¾¹æ  "Team" å¯¼èˆªé¡¹ï¼ˆä»…å›¢é˜Ÿç‰ˆè®¢é˜…ç”¨æˆ·å¯è§ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Team: Acme Engineering         Feb 24-28, 2026  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Project Hours This Week                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Timlyzer   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  48h (3 ppl)  â”‚  â”‚
â”‚  â”‚ API v3     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ        32h (2 ppl)  â”‚  â”‚
â”‚  â”‚ Docs       â–ˆâ–ˆâ–ˆâ–ˆ              12h (1 ppl)  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                    â”‚
â”‚  Team Activity (Anonymized)                       â”‚
â”‚  Avg daily hours: 7.2h                            â”‚
â”‚  Most active: Wednesday                           â”‚
â”‚  Focus ratio: 68%                                 â”‚
â”‚                                                    â”‚
â”‚  Members (5)                 Sharing Level         â”‚
â”‚  ğŸ‘¤ Alice     â–ˆâ–ˆâ–ˆâ–ˆ 38h      [Detailed â–¼]         â”‚
â”‚  ğŸ‘¤ Bob       â–ˆâ–ˆâ–ˆâ–ˆ 35h      [Aggregate â–¼]        â”‚
â”‚  ğŸ‘¤ Carol     â–ˆâ–ˆâ–ˆ  31h      [Aggregate â–¼]        â”‚
â”‚  ğŸ‘¤ Dave      â–ˆâ–ˆâ–ˆ  29h      [None â–¼]             â”‚
â”‚  ğŸ‘¤ Eve       â–ˆâ–ˆ   22h      [Detailed â–¼]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**éªŒæ”¶æ ‡å‡†**

- [ ] æˆå‘˜å¯ç‹¬ç«‹æ§åˆ¶æ•°æ®å…±äº«çº§åˆ«
- [ ] ç®¡ç†è€…ä»…èƒ½çœ‹åˆ°æˆå‘˜æˆæƒèŒƒå›´å†…çš„æ•°æ®
- [ ] èšåˆç»Ÿè®¡ä¸æš´éœ²ä¸ªäººå…·ä½“æ´»åŠ¨
- [ ] å›¢é˜Ÿé¡¹ç›®æ±‡æ€»æ•°æ®å‡†ç¡®

**æŠ€æœ¯å®ç°è¦ç‚¹**

- ä¾èµ– F4.2 çš„äº‘åŒæ­¥åŸºç¡€è®¾æ–½
- æœåŠ¡ç«¯æ–°å¢å›¢é˜Ÿç®¡ç† APIï¼ˆRust Actix-web / Axumï¼‰
- éšç§è®¾è®¡ï¼šæˆå‘˜ç«¯æ§åˆ¶æ•°æ®ç²’åº¦ï¼ŒæœåŠ¡ç«¯ä»…å­˜å‚¨æˆæƒçš„èšåˆæ•°æ®
- å•†ä¸šæ¨¡å¼ï¼šå…è´¹ä¸ªäººç‰ˆ + ä»˜è´¹å›¢é˜Ÿç‰ˆï¼ˆ$5-10/ç”¨æˆ·/æœˆï¼‰
- æŠ€æœ¯æ ˆï¼šRust å¾®æœåŠ¡ + PostgreSQL + Redis

---

### F4.5 ç¬¬ä¸‰æ–¹é›†æˆï¼ˆæ—¥å† / PM å·¥å…· / Webhookï¼‰

**ç”¨æˆ·æ•…äº‹**

> ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘å¸Œæœ›èƒ½å°†æ—¶é—´è¿½è¸ªæ•°æ®å¯¼å‡ºåˆ°æ—¥å†å’Œé¡¹ç›®ç®¡ç†å·¥å…·ï¼Œè¿™æ ·æˆ‘èƒ½åœ¨ç°æœ‰å·¥ä½œæµä¸­åˆ©ç”¨æ—¶é—´æ•°æ®ã€‚

**åŠŸèƒ½éœ€æ±‚**

| ID | éœ€æ±‚ | ä¼˜å…ˆçº§ |
|----|------|--------|
| IN-01 | æ—¥å†åŒæ­¥ï¼ˆGoogle Calendar / Apple Calendar / Outlookï¼‰ | P1 |
| IN-02 | é¡¹ç›®ç®¡ç†å·¥å…·å¯¼å‡ºï¼ˆJira / Linear / Notionï¼‰ | P2 |
| IN-03 | Webhook æ”¯æŒï¼ˆè‡ªå®šä¹‰äº‹ä»¶è§¦å‘ HTTP å›è°ƒï¼‰ | P1 |
| IN-04 | REST API æœ¬åœ°æœåŠ¡ï¼ˆä¾›ç¬¬ä¸‰æ–¹å·¥å…·æŸ¥è¯¢ï¼‰ | P0 |
| IN-05 | Zapier / n8n é›†æˆæ¨¡æ¿ | P2 |

**æ•°æ®æ¨¡å‹**

```sql
-- é›†æˆé…ç½®è¡¨
CREATE TABLE integrations (
    id TEXT PRIMARY KEY,
    name TEXT NOT NULL,
    integration_type TEXT NOT NULL,  -- 'calendar' | 'pm_tool' | 'webhook' | 'api'
    config TEXT NOT NULL,            -- JSON config
    enabled INTEGER NOT NULL DEFAULT 1,
    last_sync_at INTEGER,
    created_at INTEGER NOT NULL
);

-- Webhook äº‹ä»¶æ—¥å¿—
CREATE TABLE webhook_logs (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    integration_id TEXT NOT NULL,
    event_type TEXT NOT NULL,
    payload TEXT NOT NULL,
    status INTEGER,                  -- HTTP status code
    response TEXT,
    created_at INTEGER NOT NULL,
    FOREIGN KEY (integration_id) REFERENCES integrations(id)
);
```

TypeScript æ¥å£ï¼š

```typescript
interface Integration {
  id: string;
  name: string;
  integrationType: 'calendar' | 'pm_tool' | 'webhook' | 'api';
  config: Record<string, unknown>;
  enabled: boolean;
  lastSyncAt?: number;
  createdAt: number;
}

interface WebhookConfig {
  url: string;
  events: Array<'track_item_created' | 'focus_completed' | 'daily_summary'>;
  secret?: string;
  retryCount: number;
}

// Local REST API endpoints
// GET  /api/v1/track-items?from=&to=&taskName=
// GET  /api/v1/summary?date=
// GET  /api/v1/projects
// POST /api/v1/log-task/start
// POST /api/v1/log-task/stop
```

**UI äº¤äº’è¯´æ˜**

- å…¥å£ï¼šSettings â†’ Integrations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Integrations                      [+ Add]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“…  Google Calendar              [Connected âœ“]  â”‚
â”‚      Last sync: 5 min ago                        â”‚
â”‚      Syncing: focus sessions, manual tasks       â”‚
â”‚                                                    â”‚
â”‚  ğŸ”—  Webhook: Daily Summary       [Active]       â”‚
â”‚      https://hooks.example.com/timlyzer           â”‚
â”‚      Events: daily_summary                        â”‚
â”‚                                                    â”‚
â”‚  ğŸ”Œ  Local API                    [Running :9876] â”‚
â”‚      Docs: http://localhost:9876/api/docs         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Available:                                       â”‚
â”‚  ğŸ“… Apple Calendar    [Connect]                   â”‚
â”‚  ğŸ“‹ Jira              [Connect]                   â”‚
â”‚  ğŸ“‹ Linear            [Connect]                   â”‚
â”‚  ğŸ“‹ Notion            [Connect]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**éªŒæ”¶æ ‡å‡†**

- [ ] æ—¥å†åŒæ­¥åï¼Œä¸“æ³¨æ—¶æ®µå’Œæ‰‹åŠ¨ä»»åŠ¡å‡ºç°åœ¨æ—¥å†ä¸­
- [ ] Webhook åœ¨é…ç½®çš„äº‹ä»¶è§¦å‘æ—¶æ­£ç¡®å‘é€ HTTP POST
- [ ] æœ¬åœ° REST API å¯è¢«ç¬¬ä¸‰æ–¹å·¥å…·è°ƒç”¨æŸ¥è¯¢æ•°æ®
- [ ] æ‰€æœ‰é›†æˆå¯ç‹¬ç«‹å¯ç”¨/ç¦ç”¨

**æŠ€æœ¯å®ç°è¦ç‚¹**

- æœ¬åœ° REST APIï¼šä½¿ç”¨ Rust `actix-web` æˆ– `axum` åœ¨åå°å¯åŠ¨ HTTP æœåŠ¡ï¼ˆç»‘å®š localhostï¼‰
- æ—¥å†åŒæ­¥ï¼šä½¿ç”¨ CalDAV åè®®æˆ– Google Calendar APIï¼ˆOAuth2 æˆæƒï¼‰
- Webhookï¼šRust ç«¯ä½¿ç”¨ `reqwest` å‘é€ HTTP è¯·æ±‚ï¼Œæ”¯æŒé‡è¯•å’Œè¶…æ—¶
- é›†æˆé…ç½®é€šè¿‡æ’ä»¶ç³»ç»Ÿï¼ˆF4.1ï¼‰å®ç°å¯æ‰©å±•æ€§
- æœ¬åœ° API éµå¾ªç°æœ‰ `commands.rs` çš„å‘½ä»¤æ¨¡å¼ï¼Œå…±äº«æ•°æ®è®¿é—®å±‚

---

## 6. éåŠŸèƒ½éœ€æ±‚æ›´æ–°

### 6.1 æ€§èƒ½çº¦æŸ

| ID | éœ€æ±‚ | æŒ‡æ ‡ | é€‚ç”¨é˜¶æ®µ |
|----|------|------|----------|
| PF-01 | å†·å¯åŠ¨æ—¶é—´ | < 2 ç§’ | å…¨é˜¶æ®µ |
| PF-02 | å†…å­˜å ç”¨ï¼ˆåŸºç¡€ï¼‰ | < 100 MB | Phase 1-2 |
| PF-03 | å†…å­˜å ç”¨ï¼ˆå« AI æ¨¡å‹ï¼‰ | < 250 MB | Phase 3+ |
| PF-04 | CPU å ç”¨ï¼ˆç©ºé—²æ—¶ï¼‰ | < 1% | å…¨é˜¶æ®µ |
| PF-05 | CPU å ç”¨ï¼ˆAI æ¨ç†æ—¶ï¼‰ | < 30%ï¼ŒæŒç»­ < 5 ç§’ | Phase 3+ |
| PF-06 | æ‰“åŒ…å¤§å°ï¼ˆåŸºç¡€ï¼‰ | < 30 MB | Phase 1-2 |
| PF-07 | æ‰“åŒ…å¤§å°ï¼ˆå« AI æ¨¡å‹ï¼‰ | < 80 MB | Phase 3+ |
| PF-08 | æ•°æ®åº“æŸ¥è¯¢ï¼ˆæ—¥è§†å›¾ï¼‰ | < 100ms | å…¨é˜¶æ®µ |
| PF-09 | æ•°æ®åº“æŸ¥è¯¢ï¼ˆå¹´åº¦èšåˆï¼‰ | < 500ms | Phase 2+ |
| PF-10 | åŒæ­¥å»¶è¿Ÿ | < 30 ç§’ï¼ˆå¢é‡åŒæ­¥ï¼‰ | Phase 4 |

### 6.2 å®‰å…¨è¦æ±‚

| ID | éœ€æ±‚ | é€‚ç”¨é˜¶æ®µ |
|----|------|----------|
| SC-01 | æ•°æ®é»˜è®¤æœ¬åœ°å­˜å‚¨ï¼Œä¸ä¸Šä¼ äº‘ç«¯ | å…¨é˜¶æ®µ |
| SC-02 | SQLite WAL æ¨¡å¼ + å¯é€‰åŠ å¯†ï¼ˆ`sqlcipher`ï¼‰ | å…¨é˜¶æ®µ |
| SC-03 | éµå¾ªæœ€å°æƒé™åŸåˆ™ï¼ˆTauri capability ç³»ç»Ÿï¼‰ | å…¨é˜¶æ®µ |
| SC-04 | æ’ä»¶æ²™ç®±ï¼šéš”ç¦»è¿è¡Œï¼Œæƒé™å£°æ˜ + ç”¨æˆ·æˆæƒ | Phase 4 |
| SC-05 | äº‘åŒæ­¥ E2E åŠ å¯†ï¼šAES-256-GCMï¼Œå¯†é’¥ä»…å­˜è®¾å¤‡ç«¯ | Phase 4 |
| SC-06 | æœåŠ¡ç«¯é›¶çŸ¥è¯†æ¶æ„ï¼šæœåŠ¡å™¨æ— æ³•è§£å¯†ç”¨æˆ·æ•°æ® | Phase 4 |
| SC-07 | OAuth2 é›†æˆä½¿ç”¨ PKCE æµç¨‹ | Phase 4 |
| SC-08 | æœ¬åœ° REST API ä»…ç»‘å®š localhost | Phase 4 |

### 6.3 å¯æ‰©å±•æ€§

| ç»´åº¦ | è®¾è®¡å†³ç­– |
|------|----------|
| **æ•°æ®åº“** | SQLite è¿ç§»æœºåˆ¶ + ç‰ˆæœ¬åŒ– schemaï¼Œæ–°åŠŸèƒ½é€šè¿‡ ALTER TABLE æ‰©å±• |
| **IPC é€šä¿¡** | éµå¾ªç°æœ‰ `#[tauri::command]` æ¨¡å¼ï¼Œæ–°åŠŸèƒ½æ·»åŠ æ–°å‘½ä»¤ |
| **å‰ç«¯çŠ¶æ€** | æ¯ä¸ªåŠŸèƒ½åŸŸç‹¬ç«‹ Zustand storeï¼Œé¿å…å•ä½“ store è†¨èƒ€ |
| **å›½é™…åŒ–** | æ¯ä¸ªåŠŸèƒ½åŸŸç‹¬ç«‹ i18n namespaceï¼ŒæŒ‰éœ€åŠ è½½ |
| **åç«¯æœåŠ¡** | æ¯ä¸ªåŠŸèƒ½åŸŸç‹¬ç«‹ Service structï¼Œé€šè¿‡ `Arc<Mutex<>>` å…±äº«çŠ¶æ€ |
| **æ’ä»¶** | æ ‡å‡†åŒ– Plugin API + æ²™ç®±è¿è¡Œæ—¶ï¼Œç¤¾åŒºå¯è‡ªè¡Œæ‰©å±• |

---

## 7. æˆåŠŸæŒ‡æ ‡ä¸åº¦é‡

### 7.1 äº§å“æŒ‡æ ‡

| æŒ‡æ ‡ | Phase 2 ç›®æ ‡ | Phase 3 ç›®æ ‡ | Phase 4 ç›®æ ‡ |
|------|-------------|-------------|-------------|
| æ—¥æ´»ç”¨æˆ·ï¼ˆDAUï¼‰ | 100 | 500 | 2,000 |
| å‘¨ç•™å­˜ç‡ | 60% | 65% | 70% |
| æœˆç•™å­˜ç‡ | 40% | 45% | 50% |
| GitHub Stars | 200 | 1,000 | 5,000 |
| å¹³å‡ä¼šè¯æ—¶é•¿ | 5min | 8min | 10min |

### 7.2 æŠ€æœ¯æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | åº¦é‡æ–¹å¼ |
|------|--------|----------|
| å®‰è£…åŒ…å¤§å° | < 30MBï¼ˆåŸºç¡€ï¼‰/ < 80MBï¼ˆå« AIï¼‰ | CI æ„å»ºäº§ç‰©å¤§å° |
| å†…å­˜å ç”¨ | < 100MBï¼ˆåŸºç¡€ï¼‰/ < 250MBï¼ˆå« AIï¼‰ | ç³»ç»Ÿæ´»åŠ¨ç›‘è§†å™¨ |
| é¦–æ¬¡å¯åŠ¨åˆ°è¿½è¸ªå¼€å§‹ | < 3 ç§’ | å¯åŠ¨æ—¥å¿—æ—¶é—´æˆ³ |
| å´©æºƒç‡ | < 0.1% | Sentry é”™è¯¯ç›‘æ§ |
| æ•°æ®ä¸ç¦»å¼€è®¾å¤‡ | 100%ï¼ˆé»˜è®¤æ¨¡å¼ï¼‰ | ç½‘ç»œè¯·æ±‚å®¡è®¡ |

### 7.3 å•†ä¸šæŒ‡æ ‡ï¼ˆPhase 4ï¼‰

| æŒ‡æ ‡ | ç›®æ ‡ |
|------|------|
| å›¢é˜Ÿç‰ˆä»˜è´¹è½¬åŒ–ç‡ | 5% |
| æœˆç»å¸¸æ€§æ”¶å…¥ï¼ˆMRRï¼‰ | åˆå§‹ç›®æ ‡ $1,000 |
| ä»˜è´¹ç”¨æˆ·æœˆç•™å­˜ | 85% |

---

## é™„å½• Aï¼šåŠŸèƒ½æ¥æºè¿½æº¯

| åŠŸèƒ½ | æ¥æºæ–‡æ¡£ | åŸå§‹ ID |
|------|----------|---------|
| F1.1 å¼€æœºè‡ªå¯åŠ¨ | doc-04 | GS-02 |
| F1.2 å¤šå¹³å°æ„å»º | doc-02 | Phase 6.3 |
| F2.1 ä¸“æ³¨æ¨¡å¼ | doc-12 | 3.1.2 |
| F2.2 é¡¹ç›®/æ ‡ç­¾ | doc-12 | 3.1.3 |
| F2.3 æ—¥å†çƒ­åŠ›å›¾ | doc-04 + doc-12 | CV-01~03 + 3.2.1 |
| F2.4 æ‰‹åŠ¨ä»»åŠ¡ | doc-04 | LT-01~06 |
| F2.5 ä¼‘æ¯æé†’ | doc-04 | NO-01~03 |
| F3.1 AI æ´å¯Ÿ | doc-12 | 3.1.1 |
| F3.2 æµè§ˆå™¨æ‰©å±• | doc-12 | 3.2.2 |
| F3.3 è¶‹åŠ¿æŠ¥è¡¨ | doc-04 + doc-12 | US-04 + SE-06 + 3.2.1 |
| F3.4 å¿½ç•¥è§„åˆ™ | doc-04 | TS-03 |
| F4.1 æ’ä»¶ç³»ç»Ÿ | doc-12 | 3.3.1 |
| F4.2 äº‘åŒæ­¥ | doc-12 | 3.2.3 |
| F4.3 ç§»åŠ¨ç«¯ | doc-12 + doc-03 | 3.3.3 + Tauri 2.x mobile |
| F4.4 å›¢é˜Ÿç‰ˆ | doc-12 | 3.2.4 |
| F4.5 ç¬¬ä¸‰æ–¹é›†æˆ | doc-12 | 3.3.2 |

## é™„å½• Bï¼šå…³é”®å¤ç”¨èµ„äº§

| ç°æœ‰èµ„äº§ | è·¯å¾„ | å¤ç”¨åœºæ™¯ |
|----------|------|----------|
| TrackerService | `src-tauri/src/services/tracker.rs` | F2.1 ä¸“æ³¨æ¨¡å¼è®¡æ—¶å™¨ã€F2.5 ä¼‘æ¯æé†’ |
| StateMonitor | `src-tauri/src/services/state_monitor.rs` | F2.5 åœ¨çº¿æ—¶é•¿ç›‘æ§ |
| ActiveWindow | `src-tauri/src/services/active_window.rs` | F3.2 æµè§ˆå™¨æ‰©å±•é›†æˆ |
| Database | `src-tauri/src/database.rs` | æ‰€æœ‰åŠŸèƒ½çš„æ•°æ®å±‚æ‰©å±• |
| Commands | `src-tauri/src/commands.rs` | æ‰€æœ‰æ–°åŠŸèƒ½çš„ IPC å‘½ä»¤ |
| track_items è¡¨ | database schema | F2.4ã€F3.2ã€F4.1 æ•°æ®å­˜å‚¨ |
| app_settings è¡¨ | database schema | F3.1 åˆ†ç±»è§„åˆ™ã€F3.4 å¿½ç•¥è§„åˆ™ |
| TimelineTrack | `src/components/timeline/TimelineTrack.tsx` | F2.1 ä¸“æ³¨æ—¶æ®µæ˜¾ç¤ºã€F2.4 ä»»åŠ¡æ˜¾ç¤º |
| SummaryPage | `src/pages/SummaryPage.tsx` | F2.3 çƒ­åŠ›å›¾ã€F3.3 æŠ¥è¡¨ |
| Recharts å›¾è¡¨ | `src/pages/SummaryPage.tsx` | F2.3ã€F3.1ã€F3.3 å›¾è¡¨ |
| Zustand stores | `src/stores/*.ts` | æ‰€æœ‰æ–°åŠŸèƒ½çŠ¶æ€ç®¡ç† |
| i18n ä½“ç³» | `src/i18n/` | æ‰€æœ‰æ–°åŠŸèƒ½çš„å¤šè¯­è¨€æ”¯æŒ |
| tauri-api | `src/services/tauri-api.ts` | æ‰€æœ‰æ–°åŠŸèƒ½çš„å‰ç«¯ API è°ƒç”¨ |

---

_æ–‡æ¡£æœ€åæ›´æ–°: 2026-02-28_
